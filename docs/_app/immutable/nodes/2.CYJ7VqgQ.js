var sn=e=>{throw TypeError(e)};var wt=(e,n,a)=>n.has(e)||sn("Cannot "+a);var ue=(e,n,a)=>(wt(e,n,"read from private field"),a?a.call(e):n.get(e)),Te=(e,n,a)=>n.has(e)?sn("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(e):n.set(e,a),ln=(e,n,a,h)=>(wt(e,n,"write to private field"),h?h.call(e,a):n.set(e,a),a),St=(e,n,a)=>(wt(e,n,"access private method"),a);import{b as De,t as He}from"../chunks/disclose-version.DsQwwIng.js";import{q as ce,h as Oi,z as Vi,y as $i,l as Xn,V as Hi,W as fn,c as un,s as Mt,d as Ie,Q as Yn,o as Kn,R as Ui,ao as Ct,r as cn,ap as zi,aq as Wi,ar as Gi,C as Xi,L as hn,as as Yi,at as Ki,k as Qi,au as Zi,an as Ji,e as qi,a as ji,X as er,Z as tr,Y as nr,av as ir,aw as rr,ax as ar,P as vn,ay as or,aj as zt,ak as G,F as Et,D as J,az as sr,p as Qn,ah as kt,aA as gn,G as nt,aB as lr,I as it,t as Zn,E as we,al as Se,a8 as fr,aC as pn}from"../chunks/runtime.B46LsI9G.js";import{c as ur,e as Rt}from"../chunks/svelte-head.Csp21lXa.js";import{p as Ee,a as rt,b as Je,i as cr}from"../chunks/props.C2qv-jJw.js";let Pt=null;function hr(e,n){return n}function vr(e,n,a,h){for(var r=[],t=n.length,o=0;o<t;o++)Ki(n[o].e,r,!0);var l=t>0&&r.length===0&&a!==null;if(l){var s=a.parentNode;Qi(s),s.append(a),h.clear(),fe(e,n[0].prev,n[t-1].next)}Zi(r,()=>{for(var u=0;u<t;u++){var f=n[u];l||(h.delete(f.k),fe(e,f.prev,f.next)),Ji(f.e,!l)}})}function gr(e,n,a,h,r,t=null){var o=e,l={flags:n,items:new Map,first:null};ce&&Oi();var s=null,u=!1;Vi(()=>{var f=a(),p=$i(f)?f:f==null?[]:Xn(f),c=p.length;if(u&&c===0)return;u=c===0;let i=!1;if(ce){var v=o.data===Hi;v!==(c===0)&&(o=fn(),un(o),Mt(!1),i=!0)}if(ce){for(var g=null,d,y=0;y<c;y++){if(Ie.nodeType===8&&Ie.data===qi){o=Ie,i=!0,Mt(!1);break}var P=p[y],A=h(P,y);d=Jn(Ie,l,g,null,P,A,y,r,n),l.items.set(A,d),g=d}c>0&&un(fn())}ce||pr(p,l,o,r,n,h),t!==null&&(c===0?s?Yn(s):s=Kn(()=>t(o)):s!==null&&Ui(s,()=>{s=null})),i&&Mt(!0),a()}),ce&&(o=Ie)}function pr(e,n,a,h,r,t){var o=e.length,l=n.items,s=n.first,u=s,f,p=null,c=[],i=[],v,g,d,y;for(y=0;y<o;y+=1){if(v=e[y],g=t(v,y),d=l.get(g),d===void 0){var P=u?u.e.nodes_start:a;p=Jn(P,n,p,p===null?n.first:p.next,v,g,y,h,r),l.set(g,p),c=[],i=[],u=p.next;continue}if(dr(d,v,y),d.e.f&Ct&&Yn(d.e),d!==u){if(f!==void 0&&f.has(d)){if(c.length<i.length){var A=i[0],E;p=A.prev;var m=c[0],x=c[c.length-1];for(E=0;E<c.length;E+=1)dn(c[E],A,a);for(E=0;E<i.length;E+=1)f.delete(i[E]);fe(n,m.prev,x.next),fe(n,p,m),fe(n,x,A),u=A,p=x,y-=1,c=[],i=[]}else f.delete(d),dn(d,u,a),fe(n,d.prev,d.next),fe(n,d,p===null?n.first:p.next),fe(n,p,d),p=d;continue}for(c=[],i=[];u!==null&&u.k!==g;)u.e.f&Ct||(f??(f=new Set)).add(u),i.push(u),u=u.next;if(u===null)continue;d=u}c.push(d),p=d,u=d.next}if(u!==null||f!==void 0){for(var M=f===void 0?[]:Xn(f);u!==null;)u.e.f&Ct||M.push(u),u=u.next;var w=M.length;if(w>0){var T=null;vr(n,M,T,l)}}cn.first=n.first&&n.first.e,cn.last=p&&p.e}function dr(e,n,a,h){zi(e.v,n),e.i=a}function Jn(e,n,a,h,r,t,o,l,s){var u=Pt;try{var f=(s&Wi)!==0,p=(s&Gi)===0,c=f?p?Xi(r):hn(r):r,i=s&Yi?hn(o):o,v={i,v:c,k:t,a:null,e:null,prev:a,next:h};return Pt=v,v.e=Kn(()=>l(e,c,i),ce),v.e.prev=a&&a.e,v.e.next=h&&h.e,a===null?n.first=v:(a.next=v,a.e.next=v.e),h!==null&&(h.prev=v,h.e.prev=v.e),v}finally{Pt=u}}function dn(e,n,a){for(var h=e.next?e.next.e.nodes_start:a,r=n?n.e.nodes_start:a,t=e.e.nodes_start;t!==h;){var o=ji(t);r.before(t),t=o}}function fe(e,n,a){n===null?e.first=a:(n.next=a,n.e.next=a&&a.e),a!==null&&(a.prev=n,a.e.prev=n&&n.e)}function mr(e,n,a){er(()=>{var h=tr(()=>n(e,a==null?void 0:a())||{});if(a&&(h!=null&&h.update)){var r=!1,t={};nr(()=>{var o=a();ir(o),r&&rr(t,o)&&(t=o,h.update(o))}),r=!0}if(h!=null&&h.destroy)return()=>h.destroy()})}function Q(e,n,a,h){var r=e.__attributes??(e.__attributes={});ce&&(r[n]=e.getAttribute(n),n==="src"||n==="srcset"||n==="href"&&e.nodeName==="LINK")||r[n]!==(r[n]=a)&&(n==="loading"&&(e[ar]=a),a==null?e.removeAttribute(n):typeof a!="string"&&xr(e).includes(n)?e[n]=a:e.setAttribute(n,a))}var mn=new Map;function xr(e){var n=mn.get(e.nodeName);if(n)return n;mn.set(e.nodeName,n=[]);for(var a,h=vn(e);h.constructor.name!=="Element";){a=or(h);for(var r in a)a[r].set&&n.push(r);h=vn(h)}return n}function xn(e,n,a,h,r){var t=e.__attributes??(e.__attributes={}),o=e.style,l="style-"+n;t[l]===a&&!r||(t[l]=a,a==null?o.removeProperty(n):o.setProperty(n,a,""))}var yr=He('<link rel="preload" as="font" type="font/woff2" crossorigin="">'),wr=He('<meta name="description"> <meta name="author" content="The Pudding"> <meta name="news_keywords"> <meta property="og:title"> <meta property="og:site_name" content="The Pudding"> <meta property="og:url"> <meta property="og:description"> <meta property="og:type" content="article"> <meta property="og:locale" content="en_US"> <meta property="og:image"> <meta property="og:image:type" content="image/jpeg"> <meta property="og:image:width" content="1200"> <meta property="og:image:height" content="628"> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:site" content="https://pudding.cool"> <meta name="twitter:creator" content="@puddingviz"> <meta name="twitter:title"> <meta name="twitter:description"> <meta name="twitter:image:src"> <meta name="robots" content="max-image-preview:large"> <link rel="canonical"> <!>',1);function Sr(e,n){let a=Ee(n,"title",3,"Title TK"),h=Ee(n,"description",3,"Description TK"),r=Ee(n,"url",3,"https://pudding.cool"),t=Ee(n,"keywords",3,""),o=Ee(n,"preloadFont",19,()=>[]);ur(l=>{var s=wr(),u=zt(s),f=G(u,4),p=G(f,2),c=G(p,4),i=G(c,2),v=G(i,6),g=G(v,14),d=G(g,2),y=G(d,2),P=G(y,4),A=G(P,2);gr(A,17,o,hr,(E,m)=>{var x=yr();Et(()=>Q(x,"href",J(m))),De(E,x)}),Et(()=>{sr.title=a(),Q(u,"content",h()),Q(f,"content",t()),Q(p,"content",a()),Q(c,"content",r()),Q(i,"content",h()),Q(v,"content",`${r()??""}/assets/social-facebook.jpg`),Q(g,"content",a()),Q(d,"content",h()),Q(y,"content",`${r()??""}/assets/social-twitter.jpg`),Q(P,"href",`${r()??""}/`)}),De(l,s)})}var he=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Mr="Expected a function",yn=NaN,Cr="[object Symbol]",Pr=/^\s+|\s+$/g,Ar=/^[-+]0x[0-9a-f]+$/i,Tr=/^0b[01]+$/i,Ir=/^0o[0-7]+$/i,Er=parseInt,kr=typeof he=="object"&&he&&he.Object===Object&&he,Rr=typeof self=="object"&&self&&self.Object===Object&&self,Br=kr||Rr||Function("return this")(),_r=Object.prototype,Nr=_r.toString,Dr=Math.max,Fr=Math.min,At=function(){return Br.Date.now()};function Lr(e,n,a){var h,r,t,o,l,s,u=0,f=!1,p=!1,c=!0;if(typeof e!="function")throw new TypeError(Mr);n=wn(n)||0,Bt(a)&&(f=!!a.leading,p="maxWait"in a,t=p?Dr(wn(a.maxWait)||0,n):t,c="trailing"in a?!!a.trailing:c);function i(x){var M=h,w=r;return h=r=void 0,u=x,o=e.apply(w,M),o}function v(x){return u=x,l=setTimeout(y,n),f?i(x):o}function g(x){var M=x-s,w=x-u,T=n-M;return p?Fr(T,t-w):T}function d(x){var M=x-s,w=x-u;return s===void 0||M>=n||M<0||p&&w>=t}function y(){var x=At();if(d(x))return P(x);l=setTimeout(y,g(x))}function P(x){return l=void 0,c&&h?i(x):(h=r=void 0,o)}function A(){l!==void 0&&clearTimeout(l),u=0,h=s=r=l=void 0}function E(){return l===void 0?o:P(At())}function m(){var x=At(),M=d(x);if(h=arguments,r=this,s=x,M){if(l===void 0)return v(s);if(p)return l=setTimeout(y,n),i(s)}return l===void 0&&(l=setTimeout(y,n)),o}return m.cancel=A,m.flush=E,m}function Bt(e){var n=typeof e;return!!e&&(n=="object"||n=="function")}function br(e){return!!e&&typeof e=="object"}function Or(e){return typeof e=="symbol"||br(e)&&Nr.call(e)==Cr}function wn(e){if(typeof e=="number")return e;if(Or(e))return yn;if(Bt(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=Bt(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=e.replace(Pr,"");var a=Tr.test(e);return a||Ir.test(e)?Er(e.slice(2),a?2:8):Ar.test(e)?yn:+e}var Vr=Lr;const jn=qn(Vr);function $r(e,n={}){let a,h,r;const t=l=>{const s=h===void 0;for(const u of l){const{width:f,height:p}=u.contentRect,c=n.exclude!=="width"&&f!==h,i=n.exclude!=="height"&&p!==r;(c||i)&&(h=f,r=p,s||e.dispatchEvent(new CustomEvent("resize")))}},o=()=>{a&&a.disconnect();const l=n.debounce?jn(t,n.debounce):t;a=new ResizeObserver(l),a.observe(e)};return o(),n.start&&e.dispatchEvent(new CustomEvent("resize")),{update(l){o()},destroy(){a&&a.disconnect()}}}var ei={exports:{}};/*!
 * matter-js 0.20.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(e,n){(function(h,r){e.exports=r()})(he,function(){return function(a){var h={};function r(t){if(h[t])return h[t].exports;var o=h[t]={i:t,l:!1,exports:{}};return a[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=a,r.c=h,r.d=function(t,o,l){r.o(t,o)||Object.defineProperty(t,o,{enumerable:!0,get:l})},r.r=function(t){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,o){if(o&1&&(t=r(t)),o&8||o&4&&typeof t=="object"&&t&&t.__esModule)return t;var l=Object.create(null);if(r.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:t}),o&2&&typeof t!="string")for(var s in t)r.d(l,s,(function(u){return t[u]}).bind(null,s));return l},r.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(o,"a",o),o},r.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},r.p="",r(r.s=20)}([function(a,h){var r={};a.exports=r,function(){r._baseDelta=1e3/60,r._nextId=0,r._seed=0,r._nowStartTime=+new Date,r._warnedOnce={},r._decomp=null,r.extend=function(o,l){var s,u;typeof l=="boolean"?(s=2,u=l):(s=1,u=!0);for(var f=s;f<arguments.length;f++){var p=arguments[f];if(p)for(var c in p)u&&p[c]&&p[c].constructor===Object&&(!o[c]||o[c].constructor===Object)?(o[c]=o[c]||{},r.extend(o[c],u,p[c])):o[c]=p[c]}return o},r.clone=function(o,l){return r.extend({},l,o)},r.keys=function(o){if(Object.keys)return Object.keys(o);var l=[];for(var s in o)l.push(s);return l},r.values=function(o){var l=[];if(Object.keys){for(var s=Object.keys(o),u=0;u<s.length;u++)l.push(o[s[u]]);return l}for(var f in o)l.push(o[f]);return l},r.get=function(o,l,s,u){l=l.split(".").slice(s,u);for(var f=0;f<l.length;f+=1)o=o[l[f]];return o},r.set=function(o,l,s,u,f){var p=l.split(".").slice(u,f);return r.get(o,l,0,-1)[p[p.length-1]]=s,s},r.shuffle=function(o){for(var l=o.length-1;l>0;l--){var s=Math.floor(r.random()*(l+1)),u=o[l];o[l]=o[s],o[s]=u}return o},r.choose=function(o){return o[Math.floor(r.random()*o.length)]},r.isElement=function(o){return typeof HTMLElement<"u"?o instanceof HTMLElement:!!(o&&o.nodeType&&o.nodeName)},r.isArray=function(o){return Object.prototype.toString.call(o)==="[object Array]"},r.isFunction=function(o){return typeof o=="function"},r.isPlainObject=function(o){return typeof o=="object"&&o.constructor===Object},r.isString=function(o){return toString.call(o)==="[object String]"},r.clamp=function(o,l,s){return o<l?l:o>s?s:o},r.sign=function(o){return o<0?-1:1},r.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-r._nowStartTime},r.random=function(o,l){return o=typeof o<"u"?o:0,l=typeof l<"u"?l:1,o+t()*(l-o)};var t=function(){return r._seed=(r._seed*9301+49297)%233280,r._seed/233280};r.colorToNumber=function(o){return o=o.replace("#",""),o.length==3&&(o=o.charAt(0)+o.charAt(0)+o.charAt(1)+o.charAt(1)+o.charAt(2)+o.charAt(2)),parseInt(o,16)},r.logLevel=1,r.log=function(){console&&r.logLevel>0&&r.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.info=function(){console&&r.logLevel>0&&r.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.warn=function(){console&&r.logLevel>0&&r.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.warnOnce=function(){var o=Array.prototype.slice.call(arguments).join(" ");r._warnedOnce[o]||(r.warn(o),r._warnedOnce[o]=!0)},r.deprecated=function(o,l,s){o[l]=r.chain(function(){r.warnOnce("🔅 deprecated 🔅",s)},o[l])},r.nextId=function(){return r._nextId++},r.indexOf=function(o,l){if(o.indexOf)return o.indexOf(l);for(var s=0;s<o.length;s++)if(o[s]===l)return s;return-1},r.map=function(o,l){if(o.map)return o.map(l);for(var s=[],u=0;u<o.length;u+=1)s.push(l(o[u]));return s},r.topologicalSort=function(o){var l=[],s=[],u=[];for(var f in o)!s[f]&&!u[f]&&r._topologicalSort(f,s,u,o,l);return l},r._topologicalSort=function(o,l,s,u,f){var p=u[o]||[];s[o]=!0;for(var c=0;c<p.length;c+=1){var i=p[c];s[i]||l[i]||r._topologicalSort(i,l,s,u,f)}s[o]=!1,l[o]=!0,f.push(o)},r.chain=function(){for(var o=[],l=0;l<arguments.length;l+=1){var s=arguments[l];s._chained?o.push.apply(o,s._chained):o.push(s)}var u=function(){for(var f,p=new Array(arguments.length),c=0,i=arguments.length;c<i;c++)p[c]=arguments[c];for(c=0;c<o.length;c+=1){var v=o[c].apply(f,p);typeof v<"u"&&(f=v)}return f};return u._chained=o,u},r.chainPathBefore=function(o,l,s){return r.set(o,l,r.chain(s,r.get(o,l)))},r.chainPathAfter=function(o,l,s){return r.set(o,l,r.chain(r.get(o,l),s))},r.setDecomp=function(o){r._decomp=o},r.getDecomp=function(){var o=r._decomp;try{!o&&typeof window<"u"&&(o=window.decomp),!o&&typeof he<"u"&&(o=he.decomp)}catch{o=null}return o}}()},function(a,h){var r={};a.exports=r,function(){r.create=function(t){var o={min:{x:0,y:0},max:{x:0,y:0}};return t&&r.update(o,t),o},r.update=function(t,o,l){t.min.x=1/0,t.max.x=-1/0,t.min.y=1/0,t.max.y=-1/0;for(var s=0;s<o.length;s++){var u=o[s];u.x>t.max.x&&(t.max.x=u.x),u.x<t.min.x&&(t.min.x=u.x),u.y>t.max.y&&(t.max.y=u.y),u.y<t.min.y&&(t.min.y=u.y)}l&&(l.x>0?t.max.x+=l.x:t.min.x+=l.x,l.y>0?t.max.y+=l.y:t.min.y+=l.y)},r.contains=function(t,o){return o.x>=t.min.x&&o.x<=t.max.x&&o.y>=t.min.y&&o.y<=t.max.y},r.overlaps=function(t,o){return t.min.x<=o.max.x&&t.max.x>=o.min.x&&t.max.y>=o.min.y&&t.min.y<=o.max.y},r.translate=function(t,o){t.min.x+=o.x,t.max.x+=o.x,t.min.y+=o.y,t.max.y+=o.y},r.shift=function(t,o){var l=t.max.x-t.min.x,s=t.max.y-t.min.y;t.min.x=o.x,t.max.x=o.x+l,t.min.y=o.y,t.max.y=o.y+s}}()},function(a,h){var r={};a.exports=r,function(){r.create=function(t,o){return{x:t||0,y:o||0}},r.clone=function(t){return{x:t.x,y:t.y}},r.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},r.magnitudeSquared=function(t){return t.x*t.x+t.y*t.y},r.rotate=function(t,o,l){var s=Math.cos(o),u=Math.sin(o);l||(l={});var f=t.x*s-t.y*u;return l.y=t.x*u+t.y*s,l.x=f,l},r.rotateAbout=function(t,o,l,s){var u=Math.cos(o),f=Math.sin(o);s||(s={});var p=l.x+((t.x-l.x)*u-(t.y-l.y)*f);return s.y=l.y+((t.x-l.x)*f+(t.y-l.y)*u),s.x=p,s},r.normalise=function(t){var o=r.magnitude(t);return o===0?{x:0,y:0}:{x:t.x/o,y:t.y/o}},r.dot=function(t,o){return t.x*o.x+t.y*o.y},r.cross=function(t,o){return t.x*o.y-t.y*o.x},r.cross3=function(t,o,l){return(o.x-t.x)*(l.y-t.y)-(o.y-t.y)*(l.x-t.x)},r.add=function(t,o,l){return l||(l={}),l.x=t.x+o.x,l.y=t.y+o.y,l},r.sub=function(t,o,l){return l||(l={}),l.x=t.x-o.x,l.y=t.y-o.y,l},r.mult=function(t,o){return{x:t.x*o,y:t.y*o}},r.div=function(t,o){return{x:t.x/o,y:t.y/o}},r.perp=function(t,o){return o=o===!0?-1:1,{x:o*-t.y,y:o*t.x}},r.neg=function(t){return{x:-t.x,y:-t.y}},r.angle=function(t,o){return Math.atan2(o.y-t.y,o.x-t.x)},r._temp=[r.create(),r.create(),r.create(),r.create(),r.create(),r.create()]}()},function(a,h,r){var t={};a.exports=t;var o=r(2),l=r(0);(function(){t.create=function(s,u){for(var f=[],p=0;p<s.length;p++){var c=s[p],i={x:c.x,y:c.y,index:p,body:u,isInternal:!1};f.push(i)}return f},t.fromPath=function(s,u){var f=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,p=[];return s.replace(f,function(c,i,v){p.push({x:parseFloat(i),y:parseFloat(v)})}),t.create(p,u)},t.centre=function(s){for(var u=t.area(s,!0),f={x:0,y:0},p,c,i,v=0;v<s.length;v++)i=(v+1)%s.length,p=o.cross(s[v],s[i]),c=o.mult(o.add(s[v],s[i]),p),f=o.add(f,c);return o.div(f,6*u)},t.mean=function(s){for(var u={x:0,y:0},f=0;f<s.length;f++)u.x+=s[f].x,u.y+=s[f].y;return o.div(u,s.length)},t.area=function(s,u){for(var f=0,p=s.length-1,c=0;c<s.length;c++)f+=(s[p].x-s[c].x)*(s[p].y+s[c].y),p=c;return u?f/2:Math.abs(f)/2},t.inertia=function(s,u){for(var f=0,p=0,c=s,i,v,g=0;g<c.length;g++)v=(g+1)%c.length,i=Math.abs(o.cross(c[v],c[g])),f+=i*(o.dot(c[v],c[v])+o.dot(c[v],c[g])+o.dot(c[g],c[g])),p+=i;return u/6*(f/p)},t.translate=function(s,u,f){f=typeof f<"u"?f:1;var p=s.length,c=u.x*f,i=u.y*f,v;for(v=0;v<p;v++)s[v].x+=c,s[v].y+=i;return s},t.rotate=function(s,u,f){if(u!==0){var p=Math.cos(u),c=Math.sin(u),i=f.x,v=f.y,g=s.length,d,y,P,A;for(A=0;A<g;A++)d=s[A],y=d.x-i,P=d.y-v,d.x=i+(y*p-P*c),d.y=v+(y*c+P*p);return s}},t.contains=function(s,u){for(var f=u.x,p=u.y,c=s.length,i=s[c-1],v,g=0;g<c;g++){if(v=s[g],(f-i.x)*(v.y-i.y)+(p-i.y)*(i.x-v.x)>0)return!1;i=v}return!0},t.scale=function(s,u,f,p){if(u===1&&f===1)return s;p=p||t.centre(s);for(var c,i,v=0;v<s.length;v++)c=s[v],i=o.sub(c,p),s[v].x=p.x+i.x*u,s[v].y=p.y+i.y*f;return s},t.chamfer=function(s,u,f,p,c){typeof u=="number"?u=[u]:u=u||[8],f=typeof f<"u"?f:-1,p=p||2,c=c||14;for(var i=[],v=0;v<s.length;v++){var g=s[v-1>=0?v-1:s.length-1],d=s[v],y=s[(v+1)%s.length],P=u[v<u.length?v:u.length-1];if(P===0){i.push(d);continue}var A=o.normalise({x:d.y-g.y,y:g.x-d.x}),E=o.normalise({x:y.y-d.y,y:d.x-y.x}),m=Math.sqrt(2*Math.pow(P,2)),x=o.mult(l.clone(A),P),M=o.normalise(o.mult(o.add(A,E),.5)),w=o.sub(d,o.mult(M,m)),T=f;f===-1&&(T=Math.pow(P,.32)*1.75),T=l.clamp(T,p,c),T%2===1&&(T+=1);for(var S=Math.acos(o.dot(A,E)),C=S/T,I=0;I<T;I++)i.push(o.add(o.rotate(x,C*I),w))}return i},t.clockwiseSort=function(s){var u=t.mean(s);return s.sort(function(f,p){return o.angle(u,f)-o.angle(u,p)}),s},t.isConvex=function(s){var u=0,f=s.length,p,c,i,v;if(f<3)return null;for(p=0;p<f;p++)if(c=(p+1)%f,i=(p+2)%f,v=(s[c].x-s[p].x)*(s[i].y-s[c].y),v-=(s[c].y-s[p].y)*(s[i].x-s[c].x),v<0?u|=1:v>0&&(u|=2),u===3)return!1;return u!==0?!0:null},t.hull=function(s){var u=[],f=[],p,c;for(s=s.slice(0),s.sort(function(i,v){var g=i.x-v.x;return g!==0?g:i.y-v.y}),c=0;c<s.length;c+=1){for(p=s[c];f.length>=2&&o.cross3(f[f.length-2],f[f.length-1],p)<=0;)f.pop();f.push(p)}for(c=s.length-1;c>=0;c-=1){for(p=s[c];u.length>=2&&o.cross3(u[u.length-2],u[u.length-1],p)<=0;)u.pop();u.push(p)}return u.pop(),f.pop(),u.concat(f)}})()},function(a,h,r){var t={};a.exports=t;var o=r(3),l=r(2),s=r(7),u=r(0),f=r(1),p=r(11);(function(){t._timeCorrection=!0,t._inertiaScale=4,t._nextCollidingGroupId=1,t._nextNonCollidingGroupId=-1,t._nextCategory=1,t._baseDelta=1e3/60,t.create=function(i){var v={id:u.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:o.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},g=u.extend(v,i);return c(g,i),g},t.nextGroup=function(i){return i?t._nextNonCollidingGroupId--:t._nextCollidingGroupId++},t.nextCategory=function(){return t._nextCategory=t._nextCategory<<1,t._nextCategory};var c=function(i,v){v=v||{},t.set(i,{bounds:i.bounds||f.create(i.vertices),positionPrev:i.positionPrev||l.clone(i.position),anglePrev:i.anglePrev||i.angle,vertices:i.vertices,parts:i.parts||[i],isStatic:i.isStatic,isSleeping:i.isSleeping,parent:i.parent||i}),o.rotate(i.vertices,i.angle,i.position),p.rotate(i.axes,i.angle),f.update(i.bounds,i.vertices,i.velocity),t.set(i,{axes:v.axes||i.axes,area:v.area||i.area,mass:v.mass||i.mass,inertia:v.inertia||i.inertia});var g=i.isStatic?"#14151f":u.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),d=i.isStatic?"#555":"#ccc",y=i.isStatic&&i.render.fillStyle===null?1:0;i.render.fillStyle=i.render.fillStyle||g,i.render.strokeStyle=i.render.strokeStyle||d,i.render.lineWidth=i.render.lineWidth||y,i.render.sprite.xOffset+=-(i.bounds.min.x-i.position.x)/(i.bounds.max.x-i.bounds.min.x),i.render.sprite.yOffset+=-(i.bounds.min.y-i.position.y)/(i.bounds.max.y-i.bounds.min.y)};t.set=function(i,v,g){var d;typeof v=="string"&&(d=v,v={},v[d]=g);for(d in v)if(Object.prototype.hasOwnProperty.call(v,d))switch(g=v[d],d){case"isStatic":t.setStatic(i,g);break;case"isSleeping":s.set(i,g);break;case"mass":t.setMass(i,g);break;case"density":t.setDensity(i,g);break;case"inertia":t.setInertia(i,g);break;case"vertices":t.setVertices(i,g);break;case"position":t.setPosition(i,g);break;case"angle":t.setAngle(i,g);break;case"velocity":t.setVelocity(i,g);break;case"angularVelocity":t.setAngularVelocity(i,g);break;case"speed":t.setSpeed(i,g);break;case"angularSpeed":t.setAngularSpeed(i,g);break;case"parts":t.setParts(i,g);break;case"centre":t.setCentre(i,g);break;default:i[d]=g}},t.setStatic=function(i,v){for(var g=0;g<i.parts.length;g++){var d=i.parts[g];v?(d.isStatic||(d._original={restitution:d.restitution,friction:d.friction,mass:d.mass,inertia:d.inertia,density:d.density,inverseMass:d.inverseMass,inverseInertia:d.inverseInertia}),d.restitution=0,d.friction=1,d.mass=d.inertia=d.density=1/0,d.inverseMass=d.inverseInertia=0,d.positionPrev.x=d.position.x,d.positionPrev.y=d.position.y,d.anglePrev=d.angle,d.angularVelocity=0,d.speed=0,d.angularSpeed=0,d.motion=0):d._original&&(d.restitution=d._original.restitution,d.friction=d._original.friction,d.mass=d._original.mass,d.inertia=d._original.inertia,d.density=d._original.density,d.inverseMass=d._original.inverseMass,d.inverseInertia=d._original.inverseInertia,d._original=null),d.isStatic=v}},t.setMass=function(i,v){var g=i.inertia/(i.mass/6);i.inertia=g*(v/6),i.inverseInertia=1/i.inertia,i.mass=v,i.inverseMass=1/i.mass,i.density=i.mass/i.area},t.setDensity=function(i,v){t.setMass(i,v*i.area),i.density=v},t.setInertia=function(i,v){i.inertia=v,i.inverseInertia=1/i.inertia},t.setVertices=function(i,v){v[0].body===i?i.vertices=v:i.vertices=o.create(v,i),i.axes=p.fromVertices(i.vertices),i.area=o.area(i.vertices),t.setMass(i,i.density*i.area);var g=o.centre(i.vertices);o.translate(i.vertices,g,-1),t.setInertia(i,t._inertiaScale*o.inertia(i.vertices,i.mass)),o.translate(i.vertices,i.position),f.update(i.bounds,i.vertices,i.velocity)},t.setParts=function(i,v,g){var d;for(v=v.slice(0),i.parts.length=0,i.parts.push(i),i.parent=i,d=0;d<v.length;d++){var y=v[d];y!==i&&(y.parent=i,i.parts.push(y))}if(i.parts.length!==1){if(g=typeof g<"u"?g:!0,g){var P=[];for(d=0;d<v.length;d++)P=P.concat(v[d].vertices);o.clockwiseSort(P);var A=o.hull(P),E=o.centre(A);t.setVertices(i,A),o.translate(i.vertices,E)}var m=t._totalProperties(i);i.area=m.area,i.parent=i,i.position.x=m.centre.x,i.position.y=m.centre.y,i.positionPrev.x=m.centre.x,i.positionPrev.y=m.centre.y,t.setMass(i,m.mass),t.setInertia(i,m.inertia),t.setPosition(i,m.centre)}},t.setCentre=function(i,v,g){g?(i.positionPrev.x+=v.x,i.positionPrev.y+=v.y,i.position.x+=v.x,i.position.y+=v.y):(i.positionPrev.x=v.x-(i.position.x-i.positionPrev.x),i.positionPrev.y=v.y-(i.position.y-i.positionPrev.y),i.position.x=v.x,i.position.y=v.y)},t.setPosition=function(i,v,g){var d=l.sub(v,i.position);g?(i.positionPrev.x=i.position.x,i.positionPrev.y=i.position.y,i.velocity.x=d.x,i.velocity.y=d.y,i.speed=l.magnitude(d)):(i.positionPrev.x+=d.x,i.positionPrev.y+=d.y);for(var y=0;y<i.parts.length;y++){var P=i.parts[y];P.position.x+=d.x,P.position.y+=d.y,o.translate(P.vertices,d),f.update(P.bounds,P.vertices,i.velocity)}},t.setAngle=function(i,v,g){var d=v-i.angle;g?(i.anglePrev=i.angle,i.angularVelocity=d,i.angularSpeed=Math.abs(d)):i.anglePrev+=d;for(var y=0;y<i.parts.length;y++){var P=i.parts[y];P.angle+=d,o.rotate(P.vertices,d,i.position),p.rotate(P.axes,d),f.update(P.bounds,P.vertices,i.velocity),y>0&&l.rotateAbout(P.position,d,i.position,P.position)}},t.setVelocity=function(i,v){var g=i.deltaTime/t._baseDelta;i.positionPrev.x=i.position.x-v.x*g,i.positionPrev.y=i.position.y-v.y*g,i.velocity.x=(i.position.x-i.positionPrev.x)/g,i.velocity.y=(i.position.y-i.positionPrev.y)/g,i.speed=l.magnitude(i.velocity)},t.getVelocity=function(i){var v=t._baseDelta/i.deltaTime;return{x:(i.position.x-i.positionPrev.x)*v,y:(i.position.y-i.positionPrev.y)*v}},t.getSpeed=function(i){return l.magnitude(t.getVelocity(i))},t.setSpeed=function(i,v){t.setVelocity(i,l.mult(l.normalise(t.getVelocity(i)),v))},t.setAngularVelocity=function(i,v){var g=i.deltaTime/t._baseDelta;i.anglePrev=i.angle-v*g,i.angularVelocity=(i.angle-i.anglePrev)/g,i.angularSpeed=Math.abs(i.angularVelocity)},t.getAngularVelocity=function(i){return(i.angle-i.anglePrev)*t._baseDelta/i.deltaTime},t.getAngularSpeed=function(i){return Math.abs(t.getAngularVelocity(i))},t.setAngularSpeed=function(i,v){t.setAngularVelocity(i,u.sign(t.getAngularVelocity(i))*v)},t.translate=function(i,v,g){t.setPosition(i,l.add(i.position,v),g)},t.rotate=function(i,v,g,d){if(!g)t.setAngle(i,i.angle+v,d);else{var y=Math.cos(v),P=Math.sin(v),A=i.position.x-g.x,E=i.position.y-g.y;t.setPosition(i,{x:g.x+(A*y-E*P),y:g.y+(A*P+E*y)},d),t.setAngle(i,i.angle+v,d)}},t.scale=function(i,v,g,d){var y=0,P=0;d=d||i.position;for(var A=0;A<i.parts.length;A++){var E=i.parts[A];o.scale(E.vertices,v,g,d),E.axes=p.fromVertices(E.vertices),E.area=o.area(E.vertices),t.setMass(E,i.density*E.area),o.translate(E.vertices,{x:-E.position.x,y:-E.position.y}),t.setInertia(E,t._inertiaScale*o.inertia(E.vertices,E.mass)),o.translate(E.vertices,{x:E.position.x,y:E.position.y}),A>0&&(y+=E.area,P+=E.inertia),E.position.x=d.x+(E.position.x-d.x)*v,E.position.y=d.y+(E.position.y-d.y)*g,f.update(E.bounds,E.vertices,i.velocity)}i.parts.length>1&&(i.area=y,i.isStatic||(t.setMass(i,i.density*y),t.setInertia(i,P))),i.circleRadius&&(v===g?i.circleRadius*=v:i.circleRadius=null)},t.update=function(i,v){v=(typeof v<"u"?v:1e3/60)*i.timeScale;var g=v*v,d=t._timeCorrection?v/(i.deltaTime||v):1,y=1-i.frictionAir*(v/u._baseDelta),P=(i.position.x-i.positionPrev.x)*d,A=(i.position.y-i.positionPrev.y)*d;i.velocity.x=P*y+i.force.x/i.mass*g,i.velocity.y=A*y+i.force.y/i.mass*g,i.positionPrev.x=i.position.x,i.positionPrev.y=i.position.y,i.position.x+=i.velocity.x,i.position.y+=i.velocity.y,i.deltaTime=v,i.angularVelocity=(i.angle-i.anglePrev)*y*d+i.torque/i.inertia*g,i.anglePrev=i.angle,i.angle+=i.angularVelocity;for(var E=0;E<i.parts.length;E++){var m=i.parts[E];o.translate(m.vertices,i.velocity),E>0&&(m.position.x+=i.velocity.x,m.position.y+=i.velocity.y),i.angularVelocity!==0&&(o.rotate(m.vertices,i.angularVelocity,i.position),p.rotate(m.axes,i.angularVelocity),E>0&&l.rotateAbout(m.position,i.angularVelocity,i.position,m.position)),f.update(m.bounds,m.vertices,i.velocity)}},t.updateVelocities=function(i){var v=t._baseDelta/i.deltaTime,g=i.velocity;g.x=(i.position.x-i.positionPrev.x)*v,g.y=(i.position.y-i.positionPrev.y)*v,i.speed=Math.sqrt(g.x*g.x+g.y*g.y),i.angularVelocity=(i.angle-i.anglePrev)*v,i.angularSpeed=Math.abs(i.angularVelocity)},t.applyForce=function(i,v,g){var d={x:v.x-i.position.x,y:v.y-i.position.y};i.force.x+=g.x,i.force.y+=g.y,i.torque+=d.x*g.y-d.y*g.x},t._totalProperties=function(i){for(var v={mass:0,area:0,inertia:0,centre:{x:0,y:0}},g=i.parts.length===1?0:1;g<i.parts.length;g++){var d=i.parts[g],y=d.mass!==1/0?d.mass:1;v.mass+=y,v.area+=d.area,v.inertia+=d.inertia,v.centre=l.add(v.centre,l.mult(d.position,y))}return v.centre=l.div(v.centre,v.mass),v}})()},function(a,h,r){var t={};a.exports=t;var o=r(0);(function(){t.on=function(l,s,u){for(var f=s.split(" "),p,c=0;c<f.length;c++)p=f[c],l.events=l.events||{},l.events[p]=l.events[p]||[],l.events[p].push(u);return u},t.off=function(l,s,u){if(!s){l.events={};return}typeof s=="function"&&(u=s,s=o.keys(l.events).join(" "));for(var f=s.split(" "),p=0;p<f.length;p++){var c=l.events[f[p]],i=[];if(u&&c)for(var v=0;v<c.length;v++)c[v]!==u&&i.push(c[v]);l.events[f[p]]=i}},t.trigger=function(l,s,u){var f,p,c,i,v=l.events;if(v&&o.keys(v).length>0){u||(u={}),f=s.split(" ");for(var g=0;g<f.length;g++)if(p=f[g],c=v[p],c){i=o.clone(u,!1),i.name=p,i.source=l;for(var d=0;d<c.length;d++)c[d].apply(l,[i])}}}})()},function(a,h,r){var t={};a.exports=t;var o=r(5),l=r(0),s=r(1),u=r(4);(function(){t.create=function(f){return l.extend({id:l.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},f)},t.setModified=function(f,p,c,i){if(f.isModified=p,p&&f.cache&&(f.cache.allBodies=null,f.cache.allConstraints=null,f.cache.allComposites=null),c&&f.parent&&t.setModified(f.parent,p,c,i),i)for(var v=0;v<f.composites.length;v++){var g=f.composites[v];t.setModified(g,p,c,i)}},t.add=function(f,p){var c=[].concat(p);o.trigger(f,"beforeAdd",{object:p});for(var i=0;i<c.length;i++){var v=c[i];switch(v.type){case"body":if(v.parent!==v){l.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}t.addBody(f,v);break;case"constraint":t.addConstraint(f,v);break;case"composite":t.addComposite(f,v);break;case"mouseConstraint":t.addConstraint(f,v.constraint);break}}return o.trigger(f,"afterAdd",{object:p}),f},t.remove=function(f,p,c){var i=[].concat(p);o.trigger(f,"beforeRemove",{object:p});for(var v=0;v<i.length;v++){var g=i[v];switch(g.type){case"body":t.removeBody(f,g,c);break;case"constraint":t.removeConstraint(f,g,c);break;case"composite":t.removeComposite(f,g,c);break;case"mouseConstraint":t.removeConstraint(f,g.constraint);break}}return o.trigger(f,"afterRemove",{object:p}),f},t.addComposite=function(f,p){return f.composites.push(p),p.parent=f,t.setModified(f,!0,!0,!1),f},t.removeComposite=function(f,p,c){var i=l.indexOf(f.composites,p);if(i!==-1){var v=t.allBodies(p);t.removeCompositeAt(f,i);for(var g=0;g<v.length;g++)v[g].sleepCounter=0}if(c)for(var g=0;g<f.composites.length;g++)t.removeComposite(f.composites[g],p,!0);return f},t.removeCompositeAt=function(f,p){return f.composites.splice(p,1),t.setModified(f,!0,!0,!1),f},t.addBody=function(f,p){return f.bodies.push(p),t.setModified(f,!0,!0,!1),f},t.removeBody=function(f,p,c){var i=l.indexOf(f.bodies,p);if(i!==-1&&(t.removeBodyAt(f,i),p.sleepCounter=0),c)for(var v=0;v<f.composites.length;v++)t.removeBody(f.composites[v],p,!0);return f},t.removeBodyAt=function(f,p){return f.bodies.splice(p,1),t.setModified(f,!0,!0,!1),f},t.addConstraint=function(f,p){return f.constraints.push(p),t.setModified(f,!0,!0,!1),f},t.removeConstraint=function(f,p,c){var i=l.indexOf(f.constraints,p);if(i!==-1&&t.removeConstraintAt(f,i),c)for(var v=0;v<f.composites.length;v++)t.removeConstraint(f.composites[v],p,!0);return f},t.removeConstraintAt=function(f,p){return f.constraints.splice(p,1),t.setModified(f,!0,!0,!1),f},t.clear=function(f,p,c){if(c)for(var i=0;i<f.composites.length;i++)t.clear(f.composites[i],p,!0);return p?f.bodies=f.bodies.filter(function(v){return v.isStatic}):f.bodies.length=0,f.constraints.length=0,f.composites.length=0,t.setModified(f,!0,!0,!1),f},t.allBodies=function(f){if(f.cache&&f.cache.allBodies)return f.cache.allBodies;for(var p=[].concat(f.bodies),c=0;c<f.composites.length;c++)p=p.concat(t.allBodies(f.composites[c]));return f.cache&&(f.cache.allBodies=p),p},t.allConstraints=function(f){if(f.cache&&f.cache.allConstraints)return f.cache.allConstraints;for(var p=[].concat(f.constraints),c=0;c<f.composites.length;c++)p=p.concat(t.allConstraints(f.composites[c]));return f.cache&&(f.cache.allConstraints=p),p},t.allComposites=function(f){if(f.cache&&f.cache.allComposites)return f.cache.allComposites;for(var p=[].concat(f.composites),c=0;c<f.composites.length;c++)p=p.concat(t.allComposites(f.composites[c]));return f.cache&&(f.cache.allComposites=p),p},t.get=function(f,p,c){var i,v;switch(c){case"body":i=t.allBodies(f);break;case"constraint":i=t.allConstraints(f);break;case"composite":i=t.allComposites(f).concat(f);break}return i?(v=i.filter(function(g){return g.id.toString()===p.toString()}),v.length===0?null:v[0]):null},t.move=function(f,p,c){return t.remove(f,p),t.add(c,p),f},t.rebase=function(f){for(var p=t.allBodies(f).concat(t.allConstraints(f)).concat(t.allComposites(f)),c=0;c<p.length;c++)p[c].id=l.nextId();return f},t.translate=function(f,p,c){for(var i=c?t.allBodies(f):f.bodies,v=0;v<i.length;v++)u.translate(i[v],p);return f},t.rotate=function(f,p,c,i){for(var v=Math.cos(p),g=Math.sin(p),d=i?t.allBodies(f):f.bodies,y=0;y<d.length;y++){var P=d[y],A=P.position.x-c.x,E=P.position.y-c.y;u.setPosition(P,{x:c.x+(A*v-E*g),y:c.y+(A*g+E*v)}),u.rotate(P,p)}return f},t.scale=function(f,p,c,i,v){for(var g=v?t.allBodies(f):f.bodies,d=0;d<g.length;d++){var y=g[d],P=y.position.x-i.x,A=y.position.y-i.y;u.setPosition(y,{x:i.x+P*p,y:i.y+A*c}),u.scale(y,p,c)}return f},t.bounds=function(f){for(var p=t.allBodies(f),c=[],i=0;i<p.length;i+=1){var v=p[i];c.push(v.bounds.min,v.bounds.max)}return s.create(c)}})()},function(a,h,r){var t={};a.exports=t;var o=r(4),l=r(5),s=r(0);(function(){t._motionWakeThreshold=.18,t._motionSleepThreshold=.08,t._minBias=.9,t.update=function(u,f){for(var p=f/s._baseDelta,c=t._motionSleepThreshold,i=0;i<u.length;i++){var v=u[i],g=o.getSpeed(v),d=o.getAngularSpeed(v),y=g*g+d*d;if(v.force.x!==0||v.force.y!==0){t.set(v,!1);continue}var P=Math.min(v.motion,y),A=Math.max(v.motion,y);v.motion=t._minBias*P+(1-t._minBias)*A,v.sleepThreshold>0&&v.motion<c?(v.sleepCounter+=1,v.sleepCounter>=v.sleepThreshold/p&&t.set(v,!0)):v.sleepCounter>0&&(v.sleepCounter-=1)}},t.afterCollisions=function(u){for(var f=t._motionSleepThreshold,p=0;p<u.length;p++){var c=u[p];if(c.isActive){var i=c.collision,v=i.bodyA.parent,g=i.bodyB.parent;if(!(v.isSleeping&&g.isSleeping||v.isStatic||g.isStatic)&&(v.isSleeping||g.isSleeping)){var d=v.isSleeping&&!v.isStatic?v:g,y=d===v?g:v;!d.isStatic&&y.motion>f&&t.set(d,!1)}}}},t.set=function(u,f){var p=u.isSleeping;f?(u.isSleeping=!0,u.sleepCounter=u.sleepThreshold,u.positionImpulse.x=0,u.positionImpulse.y=0,u.positionPrev.x=u.position.x,u.positionPrev.y=u.position.y,u.anglePrev=u.angle,u.speed=0,u.angularSpeed=0,u.motion=0,p||l.trigger(u,"sleepStart")):(u.isSleeping=!1,u.sleepCounter=0,p&&l.trigger(u,"sleepEnd"))}})()},function(a,h,r){var t={};a.exports=t;var o=r(3),l=r(9);(function(){var s=[],u={overlap:0,axis:null},f={overlap:0,axis:null};t.create=function(p,c){return{pair:null,collided:!1,bodyA:p,bodyB:c,parentA:p.parent,parentB:c.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},t.collides=function(p,c,i){if(t._overlapAxes(u,p.vertices,c.vertices,p.axes),u.overlap<=0||(t._overlapAxes(f,c.vertices,p.vertices,c.axes),f.overlap<=0))return null;var v=i&&i.table[l.id(p,c)],g;v?g=v.collision:(g=t.create(p,c),g.collided=!0,g.bodyA=p.id<c.id?p:c,g.bodyB=p.id<c.id?c:p,g.parentA=g.bodyA.parent,g.parentB=g.bodyB.parent),p=g.bodyA,c=g.bodyB;var d;u.overlap<f.overlap?d=u:d=f;var y=g.normal,P=g.tangent,A=g.penetration,E=g.supports,m=d.overlap,x=d.axis,M=x.x,w=x.y,T=c.position.x-p.position.x,S=c.position.y-p.position.y;M*T+w*S>=0&&(M=-M,w=-w),y.x=M,y.y=w,P.x=-w,P.y=M,A.x=M*m,A.y=w*m,g.depth=m;var C=t._findSupports(p,c,y,1),I=0;if(o.contains(p.vertices,C[0])&&(E[I++]=C[0]),o.contains(p.vertices,C[1])&&(E[I++]=C[1]),I<2){var k=t._findSupports(c,p,y,-1);o.contains(c.vertices,k[0])&&(E[I++]=k[0]),I<2&&o.contains(c.vertices,k[1])&&(E[I++]=k[1])}return I===0&&(E[I++]=C[0]),g.supportCount=I,g},t._overlapAxes=function(p,c,i,v){var g=c.length,d=i.length,y=c[0].x,P=c[0].y,A=i[0].x,E=i[0].y,m=v.length,x=Number.MAX_VALUE,M=0,w,T,S,C,I,k;for(I=0;I<m;I++){var R=v[I],B=R.x,_=R.y,N=y*B+P*_,D=A*B+E*_,F=N,$=D;for(k=1;k<g;k+=1)C=c[k].x*B+c[k].y*_,C>F?F=C:C<N&&(N=C);for(k=1;k<d;k+=1)C=i[k].x*B+i[k].y*_,C>$?$=C:C<D&&(D=C);if(T=F-D,S=$-N,w=T<S?T:S,w<x&&(x=w,M=I,w<=0))break}p.axis=v[M],p.overlap=x},t._findSupports=function(p,c,i,v){var g=c.vertices,d=g.length,y=p.position.x,P=p.position.y,A=i.x*v,E=i.y*v,m=g[0],x=m,M=A*(y-x.x)+E*(P-x.y),w,T,S;for(S=1;S<d;S+=1)x=g[S],T=A*(y-x.x)+E*(P-x.y),T<M&&(M=T,m=x);return w=g[(d+m.index-1)%d],M=A*(y-w.x)+E*(P-w.y),x=g[(m.index+1)%d],A*(y-x.x)+E*(P-x.y)<M?(s[0]=m,s[1]=x,s):(s[0]=m,s[1]=w,s)}})()},function(a,h,r){var t={};a.exports=t;var o=r(16);(function(){t.create=function(l,s){var u=l.bodyA,f=l.bodyB,p={id:t.id(u,f),bodyA:u,bodyB:f,collision:l,contacts:[o.create(),o.create()],contactCount:0,separation:0,isActive:!0,isSensor:u.isSensor||f.isSensor,timeCreated:s,timeUpdated:s,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return t.update(p,l,s),p},t.update=function(l,s,u){var f=s.supports,p=s.supportCount,c=l.contacts,i=s.parentA,v=s.parentB;l.isActive=!0,l.timeUpdated=u,l.collision=s,l.separation=s.depth,l.inverseMass=i.inverseMass+v.inverseMass,l.friction=i.friction<v.friction?i.friction:v.friction,l.frictionStatic=i.frictionStatic>v.frictionStatic?i.frictionStatic:v.frictionStatic,l.restitution=i.restitution>v.restitution?i.restitution:v.restitution,l.slop=i.slop>v.slop?i.slop:v.slop,l.contactCount=p,s.pair=l;var g=f[0],d=c[0],y=f[1],P=c[1];(P.vertex===g||d.vertex===y)&&(c[1]=d,c[0]=d=P,P=c[1]),d.vertex=g,P.vertex=y},t.setActive=function(l,s,u){s?(l.isActive=!0,l.timeUpdated=u):(l.isActive=!1,l.contactCount=0)},t.id=function(l,s){return l.id<s.id?l.id.toString(36)+":"+s.id.toString(36):s.id.toString(36)+":"+l.id.toString(36)}})()},function(a,h,r){var t={};a.exports=t;var o=r(3),l=r(2),s=r(7),u=r(1),f=r(11),p=r(0);(function(){t._warming=.4,t._torqueDampen=1,t._minLength=1e-6,t.create=function(c){var i=c;i.bodyA&&!i.pointA&&(i.pointA={x:0,y:0}),i.bodyB&&!i.pointB&&(i.pointB={x:0,y:0});var v=i.bodyA?l.add(i.bodyA.position,i.pointA):i.pointA,g=i.bodyB?l.add(i.bodyB.position,i.pointB):i.pointB,d=l.magnitude(l.sub(v,g));i.length=typeof i.length<"u"?i.length:d,i.id=i.id||p.nextId(),i.label=i.label||"Constraint",i.type="constraint",i.stiffness=i.stiffness||(i.length>0?1:.7),i.damping=i.damping||0,i.angularStiffness=i.angularStiffness||0,i.angleA=i.bodyA?i.bodyA.angle:i.angleA,i.angleB=i.bodyB?i.bodyB.angle:i.angleB,i.plugin={};var y={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return i.length===0&&i.stiffness>.1?(y.type="pin",y.anchors=!1):i.stiffness<.9&&(y.type="spring"),i.render=p.extend(y,i.render),i},t.preSolveAll=function(c){for(var i=0;i<c.length;i+=1){var v=c[i],g=v.constraintImpulse;v.isStatic||g.x===0&&g.y===0&&g.angle===0||(v.position.x+=g.x,v.position.y+=g.y,v.angle+=g.angle)}},t.solveAll=function(c,i){for(var v=p.clamp(i/p._baseDelta,0,1),g=0;g<c.length;g+=1){var d=c[g],y=!d.bodyA||d.bodyA&&d.bodyA.isStatic,P=!d.bodyB||d.bodyB&&d.bodyB.isStatic;(y||P)&&t.solve(c[g],v)}for(g=0;g<c.length;g+=1)d=c[g],y=!d.bodyA||d.bodyA&&d.bodyA.isStatic,P=!d.bodyB||d.bodyB&&d.bodyB.isStatic,!y&&!P&&t.solve(c[g],v)},t.solve=function(c,i){var v=c.bodyA,g=c.bodyB,d=c.pointA,y=c.pointB;if(!(!v&&!g)){v&&!v.isStatic&&(l.rotate(d,v.angle-c.angleA,d),c.angleA=v.angle),g&&!g.isStatic&&(l.rotate(y,g.angle-c.angleB,y),c.angleB=g.angle);var P=d,A=y;if(v&&(P=l.add(v.position,d)),g&&(A=l.add(g.position,y)),!(!P||!A)){var E=l.sub(P,A),m=l.magnitude(E);m<t._minLength&&(m=t._minLength);var x=(m-c.length)/m,M=c.stiffness>=1||c.length===0,w=M?c.stiffness*i:c.stiffness*i*i,T=c.damping*i,S=l.mult(E,x*w),C=(v?v.inverseMass:0)+(g?g.inverseMass:0),I=(v?v.inverseInertia:0)+(g?g.inverseInertia:0),k=C+I,R,B,_,N,D;if(T>0){var F=l.create();_=l.div(E,m),D=l.sub(g&&l.sub(g.position,g.positionPrev)||F,v&&l.sub(v.position,v.positionPrev)||F),N=l.dot(_,D)}v&&!v.isStatic&&(B=v.inverseMass/C,v.constraintImpulse.x-=S.x*B,v.constraintImpulse.y-=S.y*B,v.position.x-=S.x*B,v.position.y-=S.y*B,T>0&&(v.positionPrev.x-=T*_.x*N*B,v.positionPrev.y-=T*_.y*N*B),R=l.cross(d,S)/k*t._torqueDampen*v.inverseInertia*(1-c.angularStiffness),v.constraintImpulse.angle-=R,v.angle-=R),g&&!g.isStatic&&(B=g.inverseMass/C,g.constraintImpulse.x+=S.x*B,g.constraintImpulse.y+=S.y*B,g.position.x+=S.x*B,g.position.y+=S.y*B,T>0&&(g.positionPrev.x+=T*_.x*N*B,g.positionPrev.y+=T*_.y*N*B),R=l.cross(y,S)/k*t._torqueDampen*g.inverseInertia*(1-c.angularStiffness),g.constraintImpulse.angle+=R,g.angle+=R)}}},t.postSolveAll=function(c){for(var i=0;i<c.length;i++){var v=c[i],g=v.constraintImpulse;if(!(v.isStatic||g.x===0&&g.y===0&&g.angle===0)){s.set(v,!1);for(var d=0;d<v.parts.length;d++){var y=v.parts[d];o.translate(y.vertices,g),d>0&&(y.position.x+=g.x,y.position.y+=g.y),g.angle!==0&&(o.rotate(y.vertices,g.angle,v.position),f.rotate(y.axes,g.angle),d>0&&l.rotateAbout(y.position,g.angle,v.position,y.position)),u.update(y.bounds,y.vertices,v.velocity)}g.angle*=t._warming,g.x*=t._warming,g.y*=t._warming}}},t.pointAWorld=function(c){return{x:(c.bodyA?c.bodyA.position.x:0)+(c.pointA?c.pointA.x:0),y:(c.bodyA?c.bodyA.position.y:0)+(c.pointA?c.pointA.y:0)}},t.pointBWorld=function(c){return{x:(c.bodyB?c.bodyB.position.x:0)+(c.pointB?c.pointB.x:0),y:(c.bodyB?c.bodyB.position.y:0)+(c.pointB?c.pointB.y:0)}},t.currentLength=function(c){var i=(c.bodyA?c.bodyA.position.x:0)+(c.pointA?c.pointA.x:0),v=(c.bodyA?c.bodyA.position.y:0)+(c.pointA?c.pointA.y:0),g=(c.bodyB?c.bodyB.position.x:0)+(c.pointB?c.pointB.x:0),d=(c.bodyB?c.bodyB.position.y:0)+(c.pointB?c.pointB.y:0),y=i-g,P=v-d;return Math.sqrt(y*y+P*P)}})()},function(a,h,r){var t={};a.exports=t;var o=r(2),l=r(0);(function(){t.fromVertices=function(s){for(var u={},f=0;f<s.length;f++){var p=(f+1)%s.length,c=o.normalise({x:s[p].y-s[f].y,y:s[f].x-s[p].x}),i=c.y===0?1/0:c.x/c.y;i=i.toFixed(3).toString(),u[i]=c}return l.values(u)},t.rotate=function(s,u){if(u!==0)for(var f=Math.cos(u),p=Math.sin(u),c=0;c<s.length;c++){var i=s[c],v;v=i.x*f-i.y*p,i.y=i.x*p+i.y*f,i.x=v}}})()},function(a,h,r){var t={};a.exports=t;var o=r(3),l=r(0),s=r(4),u=r(1),f=r(2);(function(){t.rectangle=function(p,c,i,v,g){g=g||{};var d={label:"Rectangle Body",position:{x:p,y:c},vertices:o.fromPath("L 0 0 L "+i+" 0 L "+i+" "+v+" L 0 "+v)};if(g.chamfer){var y=g.chamfer;d.vertices=o.chamfer(d.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete g.chamfer}return s.create(l.extend({},d,g))},t.trapezoid=function(p,c,i,v,g,d){d=d||{},g>=1&&l.warn("Bodies.trapezoid: slope parameter must be < 1."),g*=.5;var y=(1-g*2)*i,P=i*g,A=P+y,E=A+P,m;g<.5?m="L 0 0 L "+P+" "+-v+" L "+A+" "+-v+" L "+E+" 0":m="L 0 0 L "+A+" "+-v+" L "+E+" 0";var x={label:"Trapezoid Body",position:{x:p,y:c},vertices:o.fromPath(m)};if(d.chamfer){var M=d.chamfer;x.vertices=o.chamfer(x.vertices,M.radius,M.quality,M.qualityMin,M.qualityMax),delete d.chamfer}return s.create(l.extend({},x,d))},t.circle=function(p,c,i,v,g){v=v||{};var d={label:"Circle Body",circleRadius:i};g=g||25;var y=Math.ceil(Math.max(10,Math.min(g,i)));return y%2===1&&(y+=1),t.polygon(p,c,y,i,l.extend({},d,v))},t.polygon=function(p,c,i,v,g){if(g=g||{},i<3)return t.circle(p,c,v,g);for(var d=2*Math.PI/i,y="",P=d*.5,A=0;A<i;A+=1){var E=P+A*d,m=Math.cos(E)*v,x=Math.sin(E)*v;y+="L "+m.toFixed(3)+" "+x.toFixed(3)+" "}var M={label:"Polygon Body",position:{x:p,y:c},vertices:o.fromPath(y)};if(g.chamfer){var w=g.chamfer;M.vertices=o.chamfer(M.vertices,w.radius,w.quality,w.qualityMin,w.qualityMax),delete g.chamfer}return s.create(l.extend({},M,g))},t.fromVertices=function(p,c,i,v,g,d,y,P){var A=l.getDecomp(),E,m,x,M,w,T,S,C,I,k,R;for(E=!!(A&&A.quickDecomp),v=v||{},x=[],g=typeof g<"u"?g:!1,d=typeof d<"u"?d:.01,y=typeof y<"u"?y:10,P=typeof P<"u"?P:.01,l.isArray(i[0])||(i=[i]),k=0;k<i.length;k+=1)if(T=i[k],M=o.isConvex(T),w=!M,w&&!E&&l.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),M||!E)M?T=o.clockwiseSort(T):T=o.hull(T),x.push({position:{x:p,y:c},vertices:T});else{var B=T.map(function(L){return[L.x,L.y]});A.makeCCW(B),d!==!1&&A.removeCollinearPoints(B,d),P!==!1&&A.removeDuplicatePoints&&A.removeDuplicatePoints(B,P);var _=A.quickDecomp(B);for(S=0;S<_.length;S++){var N=_[S],D=N.map(function(L){return{x:L[0],y:L[1]}});y>0&&o.area(D)<y||x.push({position:o.centre(D),vertices:D})}}for(S=0;S<x.length;S++)x[S]=s.create(l.extend(x[S],v));if(g){var F=5;for(S=0;S<x.length;S++){var $=x[S];for(C=S+1;C<x.length;C++){var O=x[C];if(u.overlaps($.bounds,O.bounds)){var V=$.vertices,U=O.vertices;for(I=0;I<$.vertices.length;I++)for(R=0;R<O.vertices.length;R++){var le=f.magnitudeSquared(f.sub(V[(I+1)%V.length],U[R])),Y=f.magnitudeSquared(f.sub(V[I],U[(R+1)%U.length]));le<F&&Y<F&&(V[I].isInternal=!0,U[R].isInternal=!0)}}}}}return x.length>1?(m=s.create(l.extend({parts:x.slice(0)},v)),s.setPosition(m,{x:p,y:c}),m):x[0]}})()},function(a,h,r){var t={};a.exports=t;var o=r(0),l=r(8);(function(){t.create=function(s){var u={bodies:[],collisions:[],pairs:null};return o.extend(u,s)},t.setBodies=function(s,u){s.bodies=u.slice(0)},t.clear=function(s){s.bodies=[],s.collisions=[]},t.collisions=function(s){var u=s.pairs,f=s.bodies,p=f.length,c=t.canCollide,i=l.collides,v=s.collisions,g=0,d,y;for(f.sort(t._compareBoundsX),d=0;d<p;d++){var P=f[d],A=P.bounds,E=P.bounds.max.x,m=P.bounds.max.y,x=P.bounds.min.y,M=P.isStatic||P.isSleeping,w=P.parts.length,T=w===1;for(y=d+1;y<p;y++){var S=f[y],C=S.bounds;if(C.min.x>E)break;if(!(m<C.min.y||x>C.max.y)&&!(M&&(S.isStatic||S.isSleeping))&&c(P.collisionFilter,S.collisionFilter)){var I=S.parts.length;if(T&&I===1){var k=i(P,S,u);k&&(v[g++]=k)}else for(var R=w>1?1:0,B=I>1?1:0,_=R;_<w;_++)for(var N=P.parts[_],A=N.bounds,D=B;D<I;D++){var F=S.parts[D],C=F.bounds;if(!(A.min.x>C.max.x||A.max.x<C.min.x||A.max.y<C.min.y||A.min.y>C.max.y)){var k=i(N,F,u);k&&(v[g++]=k)}}}}}return v.length!==g&&(v.length=g),v},t.canCollide=function(s,u){return s.group===u.group&&s.group!==0?s.group>0:(s.mask&u.category)!==0&&(u.mask&s.category)!==0},t._compareBoundsX=function(s,u){return s.bounds.min.x-u.bounds.min.x}})()},function(a,h,r){var t={};a.exports=t;var o=r(0);(function(){t.create=function(l){var s={};return l||o.log("Mouse.create: element was undefined, defaulting to document.body","warn"),s.element=l||document.body,s.absolute={x:0,y:0},s.position={x:0,y:0},s.mousedownPosition={x:0,y:0},s.mouseupPosition={x:0,y:0},s.offset={x:0,y:0},s.scale={x:1,y:1},s.wheelDelta=0,s.button=-1,s.pixelRatio=parseInt(s.element.getAttribute("data-pixel-ratio"),10)||1,s.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},s.mousemove=function(u){var f=t._getRelativeMousePosition(u,s.element,s.pixelRatio),p=u.changedTouches;p&&(s.button=0,u.preventDefault()),s.absolute.x=f.x,s.absolute.y=f.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y,s.sourceEvents.mousemove=u},s.mousedown=function(u){var f=t._getRelativeMousePosition(u,s.element,s.pixelRatio),p=u.changedTouches;p?(s.button=0,u.preventDefault()):s.button=u.button,s.absolute.x=f.x,s.absolute.y=f.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y,s.mousedownPosition.x=s.position.x,s.mousedownPosition.y=s.position.y,s.sourceEvents.mousedown=u},s.mouseup=function(u){var f=t._getRelativeMousePosition(u,s.element,s.pixelRatio),p=u.changedTouches;p&&u.preventDefault(),s.button=-1,s.absolute.x=f.x,s.absolute.y=f.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y,s.mouseupPosition.x=s.position.x,s.mouseupPosition.y=s.position.y,s.sourceEvents.mouseup=u},s.mousewheel=function(u){s.wheelDelta=Math.max(-1,Math.min(1,u.wheelDelta||-u.detail)),u.preventDefault(),s.sourceEvents.mousewheel=u},t.setElement(s,s.element),s},t.setElement=function(l,s){l.element=s,s.addEventListener("mousemove",l.mousemove,{passive:!0}),s.addEventListener("mousedown",l.mousedown,{passive:!0}),s.addEventListener("mouseup",l.mouseup,{passive:!0}),s.addEventListener("wheel",l.mousewheel,{passive:!1}),s.addEventListener("touchmove",l.mousemove,{passive:!1}),s.addEventListener("touchstart",l.mousedown,{passive:!1}),s.addEventListener("touchend",l.mouseup,{passive:!1})},t.clearSourceEvents=function(l){l.sourceEvents.mousemove=null,l.sourceEvents.mousedown=null,l.sourceEvents.mouseup=null,l.sourceEvents.mousewheel=null,l.wheelDelta=0},t.setOffset=function(l,s){l.offset.x=s.x,l.offset.y=s.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y},t.setScale=function(l,s){l.scale.x=s.x,l.scale.y=s.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y},t._getRelativeMousePosition=function(l,s,u){var f=s.getBoundingClientRect(),p=document.documentElement||document.body.parentNode||document.body,c=window.pageXOffset!==void 0?window.pageXOffset:p.scrollLeft,i=window.pageYOffset!==void 0?window.pageYOffset:p.scrollTop,v=l.changedTouches,g,d;return v?(g=v[0].pageX-f.left-c,d=v[0].pageY-f.top-i):(g=l.pageX-f.left-c,d=l.pageY-f.top-i),{x:g/(s.clientWidth/(s.width||s.clientWidth)*u),y:d/(s.clientHeight/(s.height||s.clientHeight)*u)}}})()},function(a,h,r){var t={};a.exports=t;var o=r(0);(function(){t._registry={},t.register=function(l){if(t.isPlugin(l)||o.warn("Plugin.register:",t.toString(l),"does not implement all required fields."),l.name in t._registry){var s=t._registry[l.name],u=t.versionParse(l.version).number,f=t.versionParse(s.version).number;u>f?(o.warn("Plugin.register:",t.toString(s),"was upgraded to",t.toString(l)),t._registry[l.name]=l):u<f?o.warn("Plugin.register:",t.toString(s),"can not be downgraded to",t.toString(l)):l!==s&&o.warn("Plugin.register:",t.toString(l),"is already registered to different plugin object")}else t._registry[l.name]=l;return l},t.resolve=function(l){return t._registry[t.dependencyParse(l).name]},t.toString=function(l){return typeof l=="string"?l:(l.name||"anonymous")+"@"+(l.version||l.range||"0.0.0")},t.isPlugin=function(l){return l&&l.name&&l.version&&l.install},t.isUsed=function(l,s){return l.used.indexOf(s)>-1},t.isFor=function(l,s){var u=l.for&&t.dependencyParse(l.for);return!l.for||s.name===u.name&&t.versionSatisfies(s.version,u.range)},t.use=function(l,s){if(l.uses=(l.uses||[]).concat(s||[]),l.uses.length===0){o.warn("Plugin.use:",t.toString(l),"does not specify any dependencies to install.");return}for(var u=t.dependencies(l),f=o.topologicalSort(u),p=[],c=0;c<f.length;c+=1)if(f[c]!==l.name){var i=t.resolve(f[c]);if(!i){p.push("❌ "+f[c]);continue}t.isUsed(l,i.name)||(t.isFor(i,l)||(o.warn("Plugin.use:",t.toString(i),"is for",i.for,"but installed on",t.toString(l)+"."),i._warned=!0),i.install?i.install(l):(o.warn("Plugin.use:",t.toString(i),"does not specify an install function."),i._warned=!0),i._warned?(p.push("🔶 "+t.toString(i)),delete i._warned):p.push("✅ "+t.toString(i)),l.used.push(i.name))}p.length>0&&o.info(p.join("  "))},t.dependencies=function(l,s){var u=t.dependencyParse(l),f=u.name;if(s=s||{},!(f in s)){l=t.resolve(l)||l,s[f]=o.map(l.uses||[],function(c){t.isPlugin(c)&&t.register(c);var i=t.dependencyParse(c),v=t.resolve(c);return v&&!t.versionSatisfies(v.version,i.range)?(o.warn("Plugin.dependencies:",t.toString(v),"does not satisfy",t.toString(i),"used by",t.toString(u)+"."),v._warned=!0,l._warned=!0):v||(o.warn("Plugin.dependencies:",t.toString(c),"used by",t.toString(u),"could not be resolved."),l._warned=!0),i.name});for(var p=0;p<s[f].length;p+=1)t.dependencies(s[f][p],s);return s}},t.dependencyParse=function(l){if(o.isString(l)){var s=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return s.test(l)||o.warn("Plugin.dependencyParse:",l,"is not a valid dependency string."),{name:l.split("@")[0],range:l.split("@")[1]||"*"}}return{name:l.name,range:l.range||l.version}},t.versionParse=function(l){var s=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;s.test(l)||o.warn("Plugin.versionParse:",l,"is not a valid version or range.");var u=s.exec(l),f=Number(u[4]),p=Number(u[5]),c=Number(u[6]);return{isRange:!!(u[1]||u[2]),version:u[3],range:l,operator:u[1]||u[2]||"",major:f,minor:p,patch:c,parts:[f,p,c],prerelease:u[7],number:f*1e8+p*1e4+c}},t.versionSatisfies=function(l,s){s=s||"*";var u=t.versionParse(s),f=t.versionParse(l);if(u.isRange){if(u.operator==="*"||l==="*")return!0;if(u.operator===">")return f.number>u.number;if(u.operator===">=")return f.number>=u.number;if(u.operator==="~")return f.major===u.major&&f.minor===u.minor&&f.patch>=u.patch;if(u.operator==="^")return u.major>0?f.major===u.major&&f.number>=u.number:u.minor>0?f.minor===u.minor&&f.patch>=u.patch:f.patch===u.patch}return l===s||l==="*"}})()},function(a,h){var r={};a.exports=r,function(){r.create=function(t){return{vertex:t,normalImpulse:0,tangentImpulse:0}}}()},function(a,h,r){var t={};a.exports=t;var o=r(7),l=r(18),s=r(13),u=r(19),f=r(5),p=r(6),c=r(10),i=r(0),v=r(4);(function(){t._deltaMax=1e3/60,t.create=function(g){g=g||{};var d={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},y=i.extend(d,g);return y.world=g.world||p.create({label:"World"}),y.pairs=g.pairs||u.create(),y.detector=g.detector||s.create(),y.detector.pairs=y.pairs,y.grid={buckets:[]},y.world.gravity=y.gravity,y.broadphase=y.grid,y.metrics={},y},t.update=function(g,d){var y=i.now(),P=g.world,A=g.detector,E=g.pairs,m=g.timing,x=m.timestamp,M;d>t._deltaMax&&i.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",t._deltaMax.toFixed(3),"ms."),d=typeof d<"u"?d:i._baseDelta,d*=m.timeScale,m.timestamp+=d,m.lastDelta=d;var w={timestamp:m.timestamp,delta:d};f.trigger(g,"beforeUpdate",w);var T=p.allBodies(P),S=p.allConstraints(P);for(P.isModified&&(s.setBodies(A,T),p.setModified(P,!1,!1,!0)),g.enableSleeping&&o.update(T,d),t._bodiesApplyGravity(T,g.gravity),d>0&&t._bodiesUpdate(T,d),f.trigger(g,"beforeSolve",w),c.preSolveAll(T),M=0;M<g.constraintIterations;M++)c.solveAll(S,d);c.postSolveAll(T);var C=s.collisions(A);u.update(E,C,x),g.enableSleeping&&o.afterCollisions(E.list),E.collisionStart.length>0&&f.trigger(g,"collisionStart",{pairs:E.collisionStart,timestamp:m.timestamp,delta:d});var I=i.clamp(20/g.positionIterations,0,1);for(l.preSolvePosition(E.list),M=0;M<g.positionIterations;M++)l.solvePosition(E.list,d,I);for(l.postSolvePosition(T),c.preSolveAll(T),M=0;M<g.constraintIterations;M++)c.solveAll(S,d);for(c.postSolveAll(T),l.preSolveVelocity(E.list),M=0;M<g.velocityIterations;M++)l.solveVelocity(E.list,d);return t._bodiesUpdateVelocities(T),E.collisionActive.length>0&&f.trigger(g,"collisionActive",{pairs:E.collisionActive,timestamp:m.timestamp,delta:d}),E.collisionEnd.length>0&&f.trigger(g,"collisionEnd",{pairs:E.collisionEnd,timestamp:m.timestamp,delta:d}),t._bodiesClearForces(T),f.trigger(g,"afterUpdate",w),g.timing.lastElapsed=i.now()-y,g},t.merge=function(g,d){if(i.extend(g,d),d.world){g.world=d.world,t.clear(g);for(var y=p.allBodies(g.world),P=0;P<y.length;P++){var A=y[P];o.set(A,!1),A.id=i.nextId()}}},t.clear=function(g){u.clear(g.pairs),s.clear(g.detector)},t._bodiesClearForces=function(g){for(var d=g.length,y=0;y<d;y++){var P=g[y];P.force.x=0,P.force.y=0,P.torque=0}},t._bodiesApplyGravity=function(g,d){var y=typeof d.scale<"u"?d.scale:.001,P=g.length;if(!(d.x===0&&d.y===0||y===0))for(var A=0;A<P;A++){var E=g[A];E.isStatic||E.isSleeping||(E.force.y+=E.mass*d.y*y,E.force.x+=E.mass*d.x*y)}},t._bodiesUpdate=function(g,d){for(var y=g.length,P=0;P<y;P++){var A=g[P];A.isStatic||A.isSleeping||v.update(A,d)}},t._bodiesUpdateVelocities=function(g){for(var d=g.length,y=0;y<d;y++)v.updateVelocities(g[y])}})()},function(a,h,r){var t={};a.exports=t;var o=r(3),l=r(0),s=r(1);(function(){t._restingThresh=2,t._restingThreshTangent=Math.sqrt(6),t._positionDampen=.9,t._positionWarming=.8,t._frictionNormalMultiplier=5,t._frictionMaxStatic=Number.MAX_VALUE,t.preSolvePosition=function(u){var f,p,c,i=u.length;for(f=0;f<i;f++)p=u[f],p.isActive&&(c=p.contactCount,p.collision.parentA.totalContacts+=c,p.collision.parentB.totalContacts+=c)},t.solvePosition=function(u,f,p){var c,i,v,g,d,y,P,A,E=t._positionDampen*(p||1),m=l.clamp(f/l._baseDelta,0,1),x=u.length;for(c=0;c<x;c++)i=u[c],!(!i.isActive||i.isSensor)&&(v=i.collision,g=v.parentA,d=v.parentB,y=v.normal,i.separation=v.depth+y.x*(d.positionImpulse.x-g.positionImpulse.x)+y.y*(d.positionImpulse.y-g.positionImpulse.y));for(c=0;c<x;c++)i=u[c],!(!i.isActive||i.isSensor)&&(v=i.collision,g=v.parentA,d=v.parentB,y=v.normal,A=i.separation-i.slop*m,(g.isStatic||d.isStatic)&&(A*=2),g.isStatic||g.isSleeping||(P=E/g.totalContacts,g.positionImpulse.x+=y.x*A*P,g.positionImpulse.y+=y.y*A*P),d.isStatic||d.isSleeping||(P=E/d.totalContacts,d.positionImpulse.x-=y.x*A*P,d.positionImpulse.y-=y.y*A*P))},t.postSolvePosition=function(u){for(var f=t._positionWarming,p=u.length,c=o.translate,i=s.update,v=0;v<p;v++){var g=u[v],d=g.positionImpulse,y=d.x,P=d.y,A=g.velocity;if(g.totalContacts=0,y!==0||P!==0){for(var E=0;E<g.parts.length;E++){var m=g.parts[E];c(m.vertices,d),i(m.bounds,m.vertices,A),m.position.x+=y,m.position.y+=P}g.positionPrev.x+=y,g.positionPrev.y+=P,y*A.x+P*A.y<0?(d.x=0,d.y=0):(d.x*=f,d.y*=f)}}},t.preSolveVelocity=function(u){var f=u.length,p,c;for(p=0;p<f;p++){var i=u[p];if(!(!i.isActive||i.isSensor)){var v=i.contacts,g=i.contactCount,d=i.collision,y=d.parentA,P=d.parentB,A=d.normal,E=d.tangent;for(c=0;c<g;c++){var m=v[c],x=m.vertex,M=m.normalImpulse,w=m.tangentImpulse;if(M!==0||w!==0){var T=A.x*M+E.x*w,S=A.y*M+E.y*w;y.isStatic||y.isSleeping||(y.positionPrev.x+=T*y.inverseMass,y.positionPrev.y+=S*y.inverseMass,y.anglePrev+=y.inverseInertia*((x.x-y.position.x)*S-(x.y-y.position.y)*T)),P.isStatic||P.isSleeping||(P.positionPrev.x-=T*P.inverseMass,P.positionPrev.y-=S*P.inverseMass,P.anglePrev-=P.inverseInertia*((x.x-P.position.x)*S-(x.y-P.position.y)*T))}}}}},t.solveVelocity=function(u,f){var p=f/l._baseDelta,c=p*p,i=c*p,v=-t._restingThresh*p,g=t._restingThreshTangent,d=t._frictionNormalMultiplier*p,y=t._frictionMaxStatic,P=u.length,A,E,m,x;for(m=0;m<P;m++){var M=u[m];if(!(!M.isActive||M.isSensor)){var w=M.collision,T=w.parentA,S=w.parentB,C=w.normal.x,I=w.normal.y,k=w.tangent.x,R=w.tangent.y,B=M.inverseMass,_=M.friction*M.frictionStatic*d,N=M.contacts,D=M.contactCount,F=1/D,$=T.position.x-T.positionPrev.x,O=T.position.y-T.positionPrev.y,V=T.angle-T.anglePrev,U=S.position.x-S.positionPrev.x,le=S.position.y-S.positionPrev.y,Y=S.angle-S.anglePrev;for(x=0;x<D;x++){var L=N[x],K=L.vertex,H=K.x-T.position.x,Ae=K.y-T.position.y,te=K.x-S.position.x,ne=K.y-S.position.y,W=$-Ae*V,Ni=O+H*V,Di=U-ne*Y,Fi=le+te*Y,jt=W-Di,en=Ni-Fi,xt=C*jt+I*en,ae=k*jt+R*en,tn=M.separation+xt,yt=Math.min(tn,1);yt=tn<0?0:yt;var nn=yt*_;ae<-nn||ae>nn?(E=ae>0?ae:-ae,A=M.friction*(ae>0?1:-1)*i,A<-E?A=-E:A>E&&(A=E)):(A=ae,E=y);var rn=H*I-Ae*C,an=te*I-ne*C,on=F/(B+T.inverseInertia*rn*rn+S.inverseInertia*an*an),We=(1+M.restitution)*xt*on;if(A*=on,xt<v)L.normalImpulse=0;else{var Li=L.normalImpulse;L.normalImpulse+=We,L.normalImpulse>0&&(L.normalImpulse=0),We=L.normalImpulse-Li}if(ae<-g||ae>g)L.tangentImpulse=0;else{var bi=L.tangentImpulse;L.tangentImpulse+=A,L.tangentImpulse<-E&&(L.tangentImpulse=-E),L.tangentImpulse>E&&(L.tangentImpulse=E),A=L.tangentImpulse-bi}var Ge=C*We+k*A,Xe=I*We+R*A;T.isStatic||T.isSleeping||(T.positionPrev.x+=Ge*T.inverseMass,T.positionPrev.y+=Xe*T.inverseMass,T.anglePrev+=(H*Xe-Ae*Ge)*T.inverseInertia),S.isStatic||S.isSleeping||(S.positionPrev.x-=Ge*S.inverseMass,S.positionPrev.y-=Xe*S.inverseMass,S.anglePrev-=(te*Xe-ne*Ge)*S.inverseInertia)}}}}})()},function(a,h,r){var t={};a.exports=t;var o=r(9),l=r(0);(function(){t.create=function(s){return l.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},s)},t.update=function(s,u,f){var p=o.update,c=o.create,i=o.setActive,v=s.table,g=s.list,d=g.length,y=d,P=s.collisionStart,A=s.collisionEnd,E=s.collisionActive,m=u.length,x=0,M=0,w=0,T,S,C;for(C=0;C<m;C++)T=u[C],S=T.pair,S?(S.isActive&&(E[w++]=S),p(S,T,f)):(S=c(T,f),v[S.id]=S,P[x++]=S,g[y++]=S);for(y=0,d=g.length,C=0;C<d;C++)S=g[C],S.timeUpdated>=f?g[y++]=S:(i(S,!1,f),S.collision.bodyA.sleepCounter>0&&S.collision.bodyB.sleepCounter>0?g[y++]=S:(A[M++]=S,delete v[S.id]));g.length!==y&&(g.length=y),P.length!==x&&(P.length=x),A.length!==M&&(A.length=M),E.length!==w&&(E.length=w)},t.clear=function(s){return s.table={},s.list.length=0,s.collisionStart.length=0,s.collisionActive.length=0,s.collisionEnd.length=0,s}})()},function(a,h,r){var t=a.exports=r(21);t.Axes=r(11),t.Bodies=r(12),t.Body=r(4),t.Bounds=r(1),t.Collision=r(8),t.Common=r(0),t.Composite=r(6),t.Composites=r(22),t.Constraint=r(10),t.Contact=r(16),t.Detector=r(13),t.Engine=r(17),t.Events=r(5),t.Grid=r(23),t.Mouse=r(14),t.MouseConstraint=r(24),t.Pair=r(9),t.Pairs=r(19),t.Plugin=r(15),t.Query=r(25),t.Render=r(26),t.Resolver=r(18),t.Runner=r(27),t.SAT=r(28),t.Sleeping=r(7),t.Svg=r(29),t.Vector=r(2),t.Vertices=r(3),t.World=r(30),t.Engine.run=t.Runner.run,t.Common.deprecated(t.Engine,"run","Engine.run ➤ use Matter.Runner.run(engine) instead")},function(a,h,r){var t={};a.exports=t;var o=r(15),l=r(0);(function(){t.name="matter-js",t.version="0.20.0",t.uses=[],t.used=[],t.use=function(){o.use(t,Array.prototype.slice.call(arguments))},t.before=function(s,u){return s=s.replace(/^Matter./,""),l.chainPathBefore(t,s,u)},t.after=function(s,u){return s=s.replace(/^Matter./,""),l.chainPathAfter(t,s,u)}})()},function(a,h,r){var t={};a.exports=t;var o=r(6),l=r(10),s=r(0),u=r(4),f=r(12),p=s.deprecated;(function(){t.stack=function(c,i,v,g,d,y,P){for(var A=o.create({label:"Stack"}),E=c,m=i,x,M=0,w=0;w<g;w++){for(var T=0,S=0;S<v;S++){var C=P(E,m,S,w,x,M);if(C){var I=C.bounds.max.y-C.bounds.min.y,k=C.bounds.max.x-C.bounds.min.x;I>T&&(T=I),u.translate(C,{x:k*.5,y:I*.5}),E=C.bounds.max.x+d,o.addBody(A,C),x=C,M+=1}else E+=d}m+=T+y,E=c}return A},t.chain=function(c,i,v,g,d,y){for(var P=c.bodies,A=1;A<P.length;A++){var E=P[A-1],m=P[A],x=E.bounds.max.y-E.bounds.min.y,M=E.bounds.max.x-E.bounds.min.x,w=m.bounds.max.y-m.bounds.min.y,T=m.bounds.max.x-m.bounds.min.x,S={bodyA:E,pointA:{x:M*i,y:x*v},bodyB:m,pointB:{x:T*g,y:w*d}},C=s.extend(S,y);o.addConstraint(c,l.create(C))}return c.label+=" Chain",c},t.mesh=function(c,i,v,g,d){var y=c.bodies,P,A,E,m,x;for(P=0;P<v;P++){for(A=1;A<i;A++)E=y[A-1+P*i],m=y[A+P*i],o.addConstraint(c,l.create(s.extend({bodyA:E,bodyB:m},d)));if(P>0)for(A=0;A<i;A++)E=y[A+(P-1)*i],m=y[A+P*i],o.addConstraint(c,l.create(s.extend({bodyA:E,bodyB:m},d))),g&&A>0&&(x=y[A-1+(P-1)*i],o.addConstraint(c,l.create(s.extend({bodyA:x,bodyB:m},d)))),g&&A<i-1&&(x=y[A+1+(P-1)*i],o.addConstraint(c,l.create(s.extend({bodyA:x,bodyB:m},d))))}return c.label+=" Mesh",c},t.pyramid=function(c,i,v,g,d,y,P){return t.stack(c,i,v,g,d,y,function(A,E,m,x,M,w){var T=Math.min(g,Math.ceil(v/2)),S=M?M.bounds.max.x-M.bounds.min.x:0;if(!(x>T)){x=T-x;var C=x,I=v-1-x;if(!(m<C||m>I)){w===1&&u.translate(M,{x:(m+(v%2===1?1:-1))*S,y:0});var k=M?m*S:0;return P(c+k+m*d,E,m,x,M,w)}}})},t.newtonsCradle=function(c,i,v,g,d){for(var y=o.create({label:"Newtons Cradle"}),P=0;P<v;P++){var A=1.9,E=f.circle(c+P*(g*A),i+d,g,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),m=l.create({pointA:{x:c+P*(g*A),y:i},bodyB:E});o.addBody(y,E),o.addConstraint(y,m)}return y},p(t,"newtonsCradle","Composites.newtonsCradle ➤ moved to newtonsCradle example"),t.car=function(c,i,v,g,d){var y=u.nextGroup(!0),P=20,A=-v*.5+P,E=v*.5-P,m=0,x=o.create({label:"Car"}),M=f.rectangle(c,i,v,g,{collisionFilter:{group:y},chamfer:{radius:g*.5},density:2e-4}),w=f.circle(c+A,i+m,d,{collisionFilter:{group:y},friction:.8}),T=f.circle(c+E,i+m,d,{collisionFilter:{group:y},friction:.8}),S=l.create({bodyB:M,pointB:{x:A,y:m},bodyA:w,stiffness:1,length:0}),C=l.create({bodyB:M,pointB:{x:E,y:m},bodyA:T,stiffness:1,length:0});return o.addBody(x,M),o.addBody(x,w),o.addBody(x,T),o.addConstraint(x,S),o.addConstraint(x,C),x},p(t,"car","Composites.car ➤ moved to car example"),t.softBody=function(c,i,v,g,d,y,P,A,E,m){E=s.extend({inertia:1/0},E),m=s.extend({stiffness:.2,render:{type:"line",anchors:!1}},m);var x=t.stack(c,i,v,g,d,y,function(M,w){return f.circle(M,w,A,E)});return t.mesh(x,v,g,P,m),x.label="Soft Body",x},p(t,"softBody","Composites.softBody ➤ moved to softBody and cloth examples")})()},function(a,h,r){var t={};a.exports=t;var o=r(9),l=r(0),s=l.deprecated;(function(){t.create=function(u){var f={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return l.extend(f,u)},t.update=function(u,f,p,c){var i,v,g,d=p.world,y=u.buckets,P,A,E=!1;for(i=0;i<f.length;i++){var m=f[i];if(!(m.isSleeping&&!c)&&!(d.bounds&&(m.bounds.max.x<d.bounds.min.x||m.bounds.min.x>d.bounds.max.x||m.bounds.max.y<d.bounds.min.y||m.bounds.min.y>d.bounds.max.y))){var x=t._getRegion(u,m);if(!m.region||x.id!==m.region.id||c){(!m.region||c)&&(m.region=x);var M=t._regionUnion(x,m.region);for(v=M.startCol;v<=M.endCol;v++)for(g=M.startRow;g<=M.endRow;g++){A=t._getBucketId(v,g),P=y[A];var w=v>=x.startCol&&v<=x.endCol&&g>=x.startRow&&g<=x.endRow,T=v>=m.region.startCol&&v<=m.region.endCol&&g>=m.region.startRow&&g<=m.region.endRow;!w&&T&&T&&P&&t._bucketRemoveBody(u,P,m),(m.region===x||w&&!T||c)&&(P||(P=t._createBucket(y,A)),t._bucketAddBody(u,P,m))}m.region=x,E=!0}}}E&&(u.pairsList=t._createActivePairsList(u))},s(t,"update","Grid.update ➤ replaced by Matter.Detector"),t.clear=function(u){u.buckets={},u.pairs={},u.pairsList=[]},s(t,"clear","Grid.clear ➤ replaced by Matter.Detector"),t._regionUnion=function(u,f){var p=Math.min(u.startCol,f.startCol),c=Math.max(u.endCol,f.endCol),i=Math.min(u.startRow,f.startRow),v=Math.max(u.endRow,f.endRow);return t._createRegion(p,c,i,v)},t._getRegion=function(u,f){var p=f.bounds,c=Math.floor(p.min.x/u.bucketWidth),i=Math.floor(p.max.x/u.bucketWidth),v=Math.floor(p.min.y/u.bucketHeight),g=Math.floor(p.max.y/u.bucketHeight);return t._createRegion(c,i,v,g)},t._createRegion=function(u,f,p,c){return{id:u+","+f+","+p+","+c,startCol:u,endCol:f,startRow:p,endRow:c}},t._getBucketId=function(u,f){return"C"+u+"R"+f},t._createBucket=function(u,f){var p=u[f]=[];return p},t._bucketAddBody=function(u,f,p){var c=u.pairs,i=o.id,v=f.length,g;for(g=0;g<v;g++){var d=f[g];if(!(p.id===d.id||p.isStatic&&d.isStatic)){var y=i(p,d),P=c[y];P?P[2]+=1:c[y]=[p,d,1]}}f.push(p)},t._bucketRemoveBody=function(u,f,p){var c=u.pairs,i=o.id,v;f.splice(l.indexOf(f,p),1);var g=f.length;for(v=0;v<g;v++){var d=c[i(p,f[v])];d&&(d[2]-=1)}},t._createActivePairsList=function(u){var f,p=u.pairs,c=l.keys(p),i=c.length,v=[],g;for(g=0;g<i;g++)f=p[c[g]],f[2]>0?v.push(f):delete p[c[g]];return v}})()},function(a,h,r){var t={};a.exports=t;var o=r(3),l=r(7),s=r(14),u=r(5),f=r(13),p=r(10),c=r(6),i=r(0),v=r(1);(function(){t.create=function(g,d){var y=(g?g.mouse:null)||(d?d.mouse:null);y||(g&&g.render&&g.render.canvas?y=s.create(g.render.canvas):d&&d.element?y=s.create(d.element):(y=s.create(),i.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var P=p.create({label:"Mouse Constraint",pointA:y.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),A={type:"mouseConstraint",mouse:y,element:null,body:null,constraint:P,collisionFilter:{category:1,mask:4294967295,group:0}},E=i.extend(A,d);return u.on(g,"beforeUpdate",function(){var m=c.allBodies(g.world);t.update(E,m),t._triggerEvents(E)}),E},t.update=function(g,d){var y=g.mouse,P=g.constraint,A=g.body;if(y.button===0){if(P.bodyB)l.set(P.bodyB,!1),P.pointA=y.position;else for(var E=0;E<d.length;E++)if(A=d[E],v.contains(A.bounds,y.position)&&f.canCollide(A.collisionFilter,g.collisionFilter))for(var m=A.parts.length>1?1:0;m<A.parts.length;m++){var x=A.parts[m];if(o.contains(x.vertices,y.position)){P.pointA=y.position,P.bodyB=g.body=A,P.pointB={x:y.position.x-A.position.x,y:y.position.y-A.position.y},P.angleB=A.angle,l.set(A,!1),u.trigger(g,"startdrag",{mouse:y,body:A});break}}}else P.bodyB=g.body=null,P.pointB=null,A&&u.trigger(g,"enddrag",{mouse:y,body:A})},t._triggerEvents=function(g){var d=g.mouse,y=d.sourceEvents;y.mousemove&&u.trigger(g,"mousemove",{mouse:d}),y.mousedown&&u.trigger(g,"mousedown",{mouse:d}),y.mouseup&&u.trigger(g,"mouseup",{mouse:d}),s.clearSourceEvents(d)}})()},function(a,h,r){var t={};a.exports=t;var o=r(2),l=r(8),s=r(1),u=r(12),f=r(3);(function(){t.collides=function(p,c){for(var i=[],v=c.length,g=p.bounds,d=l.collides,y=s.overlaps,P=0;P<v;P++){var A=c[P],E=A.parts.length,m=E===1?0:1;if(y(A.bounds,g))for(var x=m;x<E;x++){var M=A.parts[x];if(y(M.bounds,g)){var w=d(M,p);if(w){i.push(w);break}}}}return i},t.ray=function(p,c,i,v){v=v||1e-100;for(var g=o.angle(c,i),d=o.magnitude(o.sub(c,i)),y=(i.x+c.x)*.5,P=(i.y+c.y)*.5,A=u.rectangle(y,P,d,v,{angle:g}),E=t.collides(A,p),m=0;m<E.length;m+=1){var x=E[m];x.body=x.bodyB=x.bodyA}return E},t.region=function(p,c,i){for(var v=[],g=0;g<p.length;g++){var d=p[g],y=s.overlaps(d.bounds,c);(y&&!i||!y&&i)&&v.push(d)}return v},t.point=function(p,c){for(var i=[],v=0;v<p.length;v++){var g=p[v];if(s.contains(g.bounds,c))for(var d=g.parts.length===1?0:1;d<g.parts.length;d++){var y=g.parts[d];if(s.contains(y.bounds,c)&&f.contains(y.vertices,c)){i.push(g);break}}}return i}})()},function(a,h,r){var t={};a.exports=t;var o=r(4),l=r(0),s=r(6),u=r(1),f=r(5),p=r(2),c=r(14);(function(){var i,v;typeof window<"u"&&(i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(m){window.setTimeout(function(){m(l.now())},1e3/60)},v=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),t._goodFps=30,t._goodDelta=1e3/60,t.create=function(m){var x={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],engineUpdatesHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",wireframeStrokeStyle:"#bbb",hasBounds:!!m.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},M=l.extend(x,m);return M.canvas&&(M.canvas.width=M.options.width||M.canvas.width,M.canvas.height=M.options.height||M.canvas.height),M.mouse=m.mouse,M.engine=m.engine,M.canvas=M.canvas||y(M.options.width,M.options.height),M.context=M.canvas.getContext("2d"),M.textures={},M.bounds=M.bounds||{min:{x:0,y:0},max:{x:M.canvas.width,y:M.canvas.height}},M.controller=t,M.options.showBroadphase=!1,M.options.pixelRatio!==1&&t.setPixelRatio(M,M.options.pixelRatio),l.isElement(M.element)&&M.element.appendChild(M.canvas),M},t.run=function(m){(function x(M){m.frameRequestId=i(x),g(m,M),t.world(m,M),m.context.setTransform(m.options.pixelRatio,0,0,m.options.pixelRatio,0,0),(m.options.showStats||m.options.showDebug)&&t.stats(m,m.context,M),(m.options.showPerformance||m.options.showDebug)&&t.performance(m,m.context,M),m.context.setTransform(1,0,0,1,0,0)})()},t.stop=function(m){v(m.frameRequestId)},t.setPixelRatio=function(m,x){var M=m.options,w=m.canvas;x==="auto"&&(x=P(w)),M.pixelRatio=x,w.setAttribute("data-pixel-ratio",x),w.width=M.width*x,w.height=M.height*x,w.style.width=M.width+"px",w.style.height=M.height+"px"},t.setSize=function(m,x,M){m.options.width=x,m.options.height=M,m.bounds.max.x=m.bounds.min.x+x,m.bounds.max.y=m.bounds.min.y+M,m.options.pixelRatio!==1?t.setPixelRatio(m,m.options.pixelRatio):(m.canvas.width=x,m.canvas.height=M)},t.lookAt=function(m,x,M,w){w=typeof w<"u"?w:!0,x=l.isArray(x)?x:[x],M=M||{x:0,y:0};for(var T={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},S=0;S<x.length;S+=1){var C=x[S],I=C.bounds?C.bounds.min:C.min||C.position||C,k=C.bounds?C.bounds.max:C.max||C.position||C;I&&k&&(I.x<T.min.x&&(T.min.x=I.x),k.x>T.max.x&&(T.max.x=k.x),I.y<T.min.y&&(T.min.y=I.y),k.y>T.max.y&&(T.max.y=k.y))}var R=T.max.x-T.min.x+2*M.x,B=T.max.y-T.min.y+2*M.y,_=m.canvas.height,N=m.canvas.width,D=N/_,F=R/B,$=1,O=1;F>D?O=F/D:$=D/F,m.options.hasBounds=!0,m.bounds.min.x=T.min.x,m.bounds.max.x=T.min.x+R*$,m.bounds.min.y=T.min.y,m.bounds.max.y=T.min.y+B*O,w&&(m.bounds.min.x+=R*.5-R*$*.5,m.bounds.max.x+=R*.5-R*$*.5,m.bounds.min.y+=B*.5-B*O*.5,m.bounds.max.y+=B*.5-B*O*.5),m.bounds.min.x-=M.x,m.bounds.max.x-=M.x,m.bounds.min.y-=M.y,m.bounds.max.y-=M.y,m.mouse&&(c.setScale(m.mouse,{x:(m.bounds.max.x-m.bounds.min.x)/m.canvas.width,y:(m.bounds.max.y-m.bounds.min.y)/m.canvas.height}),c.setOffset(m.mouse,m.bounds.min))},t.startViewTransform=function(m){var x=m.bounds.max.x-m.bounds.min.x,M=m.bounds.max.y-m.bounds.min.y,w=x/m.options.width,T=M/m.options.height;m.context.setTransform(m.options.pixelRatio/w,0,0,m.options.pixelRatio/T,0,0),m.context.translate(-m.bounds.min.x,-m.bounds.min.y)},t.endViewTransform=function(m){m.context.setTransform(m.options.pixelRatio,0,0,m.options.pixelRatio,0,0)},t.world=function(m,x){var M=l.now(),w=m.engine,T=w.world,S=m.canvas,C=m.context,I=m.options,k=m.timing,R=s.allBodies(T),B=s.allConstraints(T),_=I.wireframes?I.wireframeBackground:I.background,N=[],D=[],F,$={timestamp:w.timing.timestamp};if(f.trigger(m,"beforeRender",$),m.currentBackground!==_&&E(m,_),C.globalCompositeOperation="source-in",C.fillStyle="transparent",C.fillRect(0,0,S.width,S.height),C.globalCompositeOperation="source-over",I.hasBounds){for(F=0;F<R.length;F++){var O=R[F];u.overlaps(O.bounds,m.bounds)&&N.push(O)}for(F=0;F<B.length;F++){var V=B[F],U=V.bodyA,le=V.bodyB,Y=V.pointA,L=V.pointB;U&&(Y=p.add(U.position,V.pointA)),le&&(L=p.add(le.position,V.pointB)),!(!Y||!L)&&(u.contains(m.bounds,Y)||u.contains(m.bounds,L))&&D.push(V)}t.startViewTransform(m),m.mouse&&(c.setScale(m.mouse,{x:(m.bounds.max.x-m.bounds.min.x)/m.options.width,y:(m.bounds.max.y-m.bounds.min.y)/m.options.height}),c.setOffset(m.mouse,m.bounds.min))}else D=B,N=R,m.options.pixelRatio!==1&&m.context.setTransform(m.options.pixelRatio,0,0,m.options.pixelRatio,0,0);!I.wireframes||w.enableSleeping&&I.showSleeping?t.bodies(m,N,C):(I.showConvexHulls&&t.bodyConvexHulls(m,N,C),t.bodyWireframes(m,N,C)),I.showBounds&&t.bodyBounds(m,N,C),(I.showAxes||I.showAngleIndicator)&&t.bodyAxes(m,N,C),I.showPositions&&t.bodyPositions(m,N,C),I.showVelocity&&t.bodyVelocity(m,N,C),I.showIds&&t.bodyIds(m,N,C),I.showSeparations&&t.separations(m,w.pairs.list,C),I.showCollisions&&t.collisions(m,w.pairs.list,C),I.showVertexNumbers&&t.vertexNumbers(m,N,C),I.showMousePosition&&t.mousePosition(m,m.mouse,C),t.constraints(D,C),I.hasBounds&&t.endViewTransform(m),f.trigger(m,"afterRender",$),k.lastElapsed=l.now()-M},t.stats=function(m,x,M){for(var w=m.engine,T=w.world,S=s.allBodies(T),C=0,I=55,k=44,R=0,B=0,_=0;_<S.length;_+=1)C+=S[_].parts.length;var N={Part:C,Body:S.length,Cons:s.allConstraints(T).length,Comp:s.allComposites(T).length,Pair:w.pairs.list.length};x.fillStyle="#0e0f19",x.fillRect(R,B,I*5.5,k),x.font="12px Arial",x.textBaseline="top",x.textAlign="right";for(var D in N){var F=N[D];x.fillStyle="#aaa",x.fillText(D,R+I,B+8),x.fillStyle="#eee",x.fillText(F,R+I,B+26),R+=I}},t.performance=function(m,x){var M=m.engine,w=m.timing,T=w.deltaHistory,S=w.elapsedHistory,C=w.timestampElapsedHistory,I=w.engineDeltaHistory,k=w.engineUpdatesHistory,R=w.engineElapsedHistory,B=M.timing.lastUpdatesPerFrame,_=M.timing.lastDelta,N=d(T),D=d(S),F=d(I),$=d(k),O=d(R),V=d(C),U=V/N||0,le=Math.round(N/_),Y=1e3/N||0,L=4,K=12,H=60,Ae=34,te=10,ne=69;x.fillStyle="#0e0f19",x.fillRect(0,50,K*5+H*6+22,Ae),t.status(x,te,ne,H,L,T.length,Math.round(Y)+" fps",Y/t._goodFps,function(W){return T[W]/N-1}),t.status(x,te+K+H,ne,H,L,I.length,_.toFixed(2)+" dt",t._goodDelta/_,function(W){return I[W]/F-1}),t.status(x,te+(K+H)*2,ne,H,L,k.length,B+" upf",Math.pow(l.clamp($/le||1,0,1),4),function(W){return k[W]/$-1}),t.status(x,te+(K+H)*3,ne,H,L,R.length,O.toFixed(2)+" ut",1-B*O/t._goodFps,function(W){return R[W]/O-1}),t.status(x,te+(K+H)*4,ne,H,L,S.length,D.toFixed(2)+" rt",1-D/t._goodFps,function(W){return S[W]/D-1}),t.status(x,te+(K+H)*5,ne,H,L,C.length,U.toFixed(2)+" x",U*U*U,function(W){return(C[W]/T[W]/U||0)-1})},t.status=function(m,x,M,w,T,S,C,I,k){m.strokeStyle="#888",m.fillStyle="#444",m.lineWidth=1,m.fillRect(x,M+7,w,1),m.beginPath(),m.moveTo(x,M+7-T*l.clamp(.4*k(0),-2,2));for(var R=0;R<w;R+=1)m.lineTo(x+R,M+7-(R<S?T*l.clamp(.4*k(R),-2,2):0));m.stroke(),m.fillStyle="hsl("+l.clamp(25+95*I,0,120)+",100%,60%)",m.fillRect(x,M-7,4,4),m.font="12px Arial",m.textBaseline="middle",m.textAlign="right",m.fillStyle="#eee",m.fillText(C,x+w,M-5)},t.constraints=function(m,x){for(var M=x,w=0;w<m.length;w++){var T=m[w];if(!(!T.render.visible||!T.pointA||!T.pointB)){var S=T.bodyA,C=T.bodyB,I,k;if(S?I=p.add(S.position,T.pointA):I=T.pointA,T.render.type==="pin")M.beginPath(),M.arc(I.x,I.y,3,0,2*Math.PI),M.closePath();else{if(C?k=p.add(C.position,T.pointB):k=T.pointB,M.beginPath(),M.moveTo(I.x,I.y),T.render.type==="spring")for(var R=p.sub(k,I),B=p.perp(p.normalise(R)),_=Math.ceil(l.clamp(T.length/5,12,20)),N,D=1;D<_;D+=1)N=D%2===0?1:-1,M.lineTo(I.x+R.x*(D/_)+B.x*N*4,I.y+R.y*(D/_)+B.y*N*4);M.lineTo(k.x,k.y)}T.render.lineWidth&&(M.lineWidth=T.render.lineWidth,M.strokeStyle=T.render.strokeStyle,M.stroke()),T.render.anchors&&(M.fillStyle=T.render.strokeStyle,M.beginPath(),M.arc(I.x,I.y,3,0,2*Math.PI),M.arc(k.x,k.y,3,0,2*Math.PI),M.closePath(),M.fill())}}},t.bodies=function(m,x,M){var w=M;m.engine;var T=m.options,S=T.showInternalEdges||!T.wireframes,C,I,k,R;for(k=0;k<x.length;k++)if(C=x[k],!!C.render.visible){for(R=C.parts.length>1?1:0;R<C.parts.length;R++)if(I=C.parts[R],!!I.render.visible){if(T.showSleeping&&C.isSleeping?w.globalAlpha=.5*I.render.opacity:I.render.opacity!==1&&(w.globalAlpha=I.render.opacity),I.render.sprite&&I.render.sprite.texture&&!T.wireframes){var B=I.render.sprite,_=A(m,B.texture);w.translate(I.position.x,I.position.y),w.rotate(I.angle),w.drawImage(_,_.width*-B.xOffset*B.xScale,_.height*-B.yOffset*B.yScale,_.width*B.xScale,_.height*B.yScale),w.rotate(-I.angle),w.translate(-I.position.x,-I.position.y)}else{if(I.circleRadius)w.beginPath(),w.arc(I.position.x,I.position.y,I.circleRadius,0,2*Math.PI);else{w.beginPath(),w.moveTo(I.vertices[0].x,I.vertices[0].y);for(var N=1;N<I.vertices.length;N++)!I.vertices[N-1].isInternal||S?w.lineTo(I.vertices[N].x,I.vertices[N].y):w.moveTo(I.vertices[N].x,I.vertices[N].y),I.vertices[N].isInternal&&!S&&w.moveTo(I.vertices[(N+1)%I.vertices.length].x,I.vertices[(N+1)%I.vertices.length].y);w.lineTo(I.vertices[0].x,I.vertices[0].y),w.closePath()}T.wireframes?(w.lineWidth=1,w.strokeStyle=m.options.wireframeStrokeStyle,w.stroke()):(w.fillStyle=I.render.fillStyle,I.render.lineWidth&&(w.lineWidth=I.render.lineWidth,w.strokeStyle=I.render.strokeStyle,w.stroke()),w.fill())}w.globalAlpha=1}}},t.bodyWireframes=function(m,x,M){var w=M,T=m.options.showInternalEdges,S,C,I,k,R;for(w.beginPath(),I=0;I<x.length;I++)if(S=x[I],!!S.render.visible)for(R=S.parts.length>1?1:0;R<S.parts.length;R++){for(C=S.parts[R],w.moveTo(C.vertices[0].x,C.vertices[0].y),k=1;k<C.vertices.length;k++)!C.vertices[k-1].isInternal||T?w.lineTo(C.vertices[k].x,C.vertices[k].y):w.moveTo(C.vertices[k].x,C.vertices[k].y),C.vertices[k].isInternal&&!T&&w.moveTo(C.vertices[(k+1)%C.vertices.length].x,C.vertices[(k+1)%C.vertices.length].y);w.lineTo(C.vertices[0].x,C.vertices[0].y)}w.lineWidth=1,w.strokeStyle=m.options.wireframeStrokeStyle,w.stroke()},t.bodyConvexHulls=function(m,x,M){var w=M,T,S,C;for(w.beginPath(),S=0;S<x.length;S++)if(T=x[S],!(!T.render.visible||T.parts.length===1)){for(w.moveTo(T.vertices[0].x,T.vertices[0].y),C=1;C<T.vertices.length;C++)w.lineTo(T.vertices[C].x,T.vertices[C].y);w.lineTo(T.vertices[0].x,T.vertices[0].y)}w.lineWidth=1,w.strokeStyle="rgba(255,255,255,0.2)",w.stroke()},t.vertexNumbers=function(m,x,M){var w=M,T,S,C;for(T=0;T<x.length;T++){var I=x[T].parts;for(C=I.length>1?1:0;C<I.length;C++){var k=I[C];for(S=0;S<k.vertices.length;S++)w.fillStyle="rgba(255,255,255,0.2)",w.fillText(T+"_"+S,k.position.x+(k.vertices[S].x-k.position.x)*.8,k.position.y+(k.vertices[S].y-k.position.y)*.8)}}},t.mousePosition=function(m,x,M){var w=M;w.fillStyle="rgba(255,255,255,0.8)",w.fillText(x.position.x+"  "+x.position.y,x.position.x+5,x.position.y-5)},t.bodyBounds=function(m,x,M){var w=M;m.engine;var T=m.options;w.beginPath();for(var S=0;S<x.length;S++){var C=x[S];if(C.render.visible)for(var I=x[S].parts,k=I.length>1?1:0;k<I.length;k++){var R=I[k];w.rect(R.bounds.min.x,R.bounds.min.y,R.bounds.max.x-R.bounds.min.x,R.bounds.max.y-R.bounds.min.y)}}T.wireframes?w.strokeStyle="rgba(255,255,255,0.08)":w.strokeStyle="rgba(0,0,0,0.1)",w.lineWidth=1,w.stroke()},t.bodyAxes=function(m,x,M){var w=M;m.engine;var T=m.options,S,C,I,k;for(w.beginPath(),C=0;C<x.length;C++){var R=x[C],B=R.parts;if(R.render.visible)if(T.showAxes)for(I=B.length>1?1:0;I<B.length;I++)for(S=B[I],k=0;k<S.axes.length;k++){var _=S.axes[k];w.moveTo(S.position.x,S.position.y),w.lineTo(S.position.x+_.x*20,S.position.y+_.y*20)}else for(I=B.length>1?1:0;I<B.length;I++)for(S=B[I],k=0;k<S.axes.length;k++)w.moveTo(S.position.x,S.position.y),w.lineTo((S.vertices[0].x+S.vertices[S.vertices.length-1].x)/2,(S.vertices[0].y+S.vertices[S.vertices.length-1].y)/2)}T.wireframes?(w.strokeStyle="indianred",w.lineWidth=1):(w.strokeStyle="rgba(255, 255, 255, 0.4)",w.globalCompositeOperation="overlay",w.lineWidth=2),w.stroke(),w.globalCompositeOperation="source-over"},t.bodyPositions=function(m,x,M){var w=M;m.engine;var T=m.options,S,C,I,k;for(w.beginPath(),I=0;I<x.length;I++)if(S=x[I],!!S.render.visible)for(k=0;k<S.parts.length;k++)C=S.parts[k],w.arc(C.position.x,C.position.y,3,0,2*Math.PI,!1),w.closePath();for(T.wireframes?w.fillStyle="indianred":w.fillStyle="rgba(0,0,0,0.5)",w.fill(),w.beginPath(),I=0;I<x.length;I++)S=x[I],S.render.visible&&(w.arc(S.positionPrev.x,S.positionPrev.y,2,0,2*Math.PI,!1),w.closePath());w.fillStyle="rgba(255,165,0,0.8)",w.fill()},t.bodyVelocity=function(m,x,M){var w=M;w.beginPath();for(var T=0;T<x.length;T++){var S=x[T];if(S.render.visible){var C=o.getVelocity(S);w.moveTo(S.position.x,S.position.y),w.lineTo(S.position.x+C.x,S.position.y+C.y)}}w.lineWidth=3,w.strokeStyle="cornflowerblue",w.stroke()},t.bodyIds=function(m,x,M){var w=M,T,S;for(T=0;T<x.length;T++)if(x[T].render.visible){var C=x[T].parts;for(S=C.length>1?1:0;S<C.length;S++){var I=C[S];w.font="12px Arial",w.fillStyle="rgba(255,255,255,0.5)",w.fillText(I.id,I.position.x+10,I.position.y-10)}}},t.collisions=function(m,x,M){var w=M,T=m.options,S,C,I,k;for(w.beginPath(),I=0;I<x.length;I++)if(S=x[I],!!S.isActive)for(C=S.collision,k=0;k<S.contactCount;k++){var R=S.contacts[k],B=R.vertex;w.rect(B.x-1.5,B.y-1.5,3.5,3.5)}for(T.wireframes?w.fillStyle="rgba(255,255,255,0.7)":w.fillStyle="orange",w.fill(),w.beginPath(),I=0;I<x.length;I++)if(S=x[I],!!S.isActive&&(C=S.collision,S.contactCount>0)){var _=S.contacts[0].vertex.x,N=S.contacts[0].vertex.y;S.contactCount===2&&(_=(S.contacts[0].vertex.x+S.contacts[1].vertex.x)/2,N=(S.contacts[0].vertex.y+S.contacts[1].vertex.y)/2),C.bodyB===C.supports[0].body||C.bodyA.isStatic===!0?w.moveTo(_-C.normal.x*8,N-C.normal.y*8):w.moveTo(_+C.normal.x*8,N+C.normal.y*8),w.lineTo(_,N)}T.wireframes?w.strokeStyle="rgba(255,165,0,0.7)":w.strokeStyle="orange",w.lineWidth=1,w.stroke()},t.separations=function(m,x,M){var w=M,T=m.options,S,C,I,k,R;for(w.beginPath(),R=0;R<x.length;R++)if(S=x[R],!!S.isActive){C=S.collision,I=C.bodyA,k=C.bodyB;var B=1;!k.isStatic&&!I.isStatic&&(B=.5),k.isStatic&&(B=0),w.moveTo(k.position.x,k.position.y),w.lineTo(k.position.x-C.penetration.x*B,k.position.y-C.penetration.y*B),B=1,!k.isStatic&&!I.isStatic&&(B=.5),I.isStatic&&(B=0),w.moveTo(I.position.x,I.position.y),w.lineTo(I.position.x+C.penetration.x*B,I.position.y+C.penetration.y*B)}T.wireframes?w.strokeStyle="rgba(255,165,0,0.5)":w.strokeStyle="orange",w.stroke()},t.inspector=function(m,x){m.engine;var M=m.selected,w=m.render,T=w.options,S;if(T.hasBounds){var C=w.bounds.max.x-w.bounds.min.x,I=w.bounds.max.y-w.bounds.min.y,k=C/w.options.width,R=I/w.options.height;x.scale(1/k,1/R),x.translate(-w.bounds.min.x,-w.bounds.min.y)}for(var B=0;B<M.length;B++){var _=M[B].data;switch(x.translate(.5,.5),x.lineWidth=1,x.strokeStyle="rgba(255,165,0,0.9)",x.setLineDash([1,2]),_.type){case"body":S=_.bounds,x.beginPath(),x.rect(Math.floor(S.min.x-3),Math.floor(S.min.y-3),Math.floor(S.max.x-S.min.x+6),Math.floor(S.max.y-S.min.y+6)),x.closePath(),x.stroke();break;case"constraint":var N=_.pointA;_.bodyA&&(N=_.pointB),x.beginPath(),x.arc(N.x,N.y,10,0,2*Math.PI),x.closePath(),x.stroke();break}x.setLineDash([]),x.translate(-.5,-.5)}m.selectStart!==null&&(x.translate(.5,.5),x.lineWidth=1,x.strokeStyle="rgba(255,165,0,0.6)",x.fillStyle="rgba(255,165,0,0.1)",S=m.selectBounds,x.beginPath(),x.rect(Math.floor(S.min.x),Math.floor(S.min.y),Math.floor(S.max.x-S.min.x),Math.floor(S.max.y-S.min.y)),x.closePath(),x.stroke(),x.fill(),x.translate(-.5,-.5)),T.hasBounds&&x.setTransform(1,0,0,1,0,0)};var g=function(m,x){var M=m.engine,w=m.timing,T=w.historySize,S=M.timing.timestamp;w.delta=x-w.lastTime||t._goodDelta,w.lastTime=x,w.timestampElapsed=S-w.lastTimestamp||0,w.lastTimestamp=S,w.deltaHistory.unshift(w.delta),w.deltaHistory.length=Math.min(w.deltaHistory.length,T),w.engineDeltaHistory.unshift(M.timing.lastDelta),w.engineDeltaHistory.length=Math.min(w.engineDeltaHistory.length,T),w.timestampElapsedHistory.unshift(w.timestampElapsed),w.timestampElapsedHistory.length=Math.min(w.timestampElapsedHistory.length,T),w.engineUpdatesHistory.unshift(M.timing.lastUpdatesPerFrame),w.engineUpdatesHistory.length=Math.min(w.engineUpdatesHistory.length,T),w.engineElapsedHistory.unshift(M.timing.lastElapsed),w.engineElapsedHistory.length=Math.min(w.engineElapsedHistory.length,T),w.elapsedHistory.unshift(w.lastElapsed),w.elapsedHistory.length=Math.min(w.elapsedHistory.length,T)},d=function(m){for(var x=0,M=0;M<m.length;M+=1)x+=m[M];return x/m.length||0},y=function(m,x){var M=document.createElement("canvas");return M.width=m,M.height=x,M.oncontextmenu=function(){return!1},M.onselectstart=function(){return!1},M},P=function(m){var x=m.getContext("2d"),M=window.devicePixelRatio||1,w=x.webkitBackingStorePixelRatio||x.mozBackingStorePixelRatio||x.msBackingStorePixelRatio||x.oBackingStorePixelRatio||x.backingStorePixelRatio||1;return M/w},A=function(m,x){var M=m.textures[x];return M||(M=m.textures[x]=new Image,M.src=x,M)},E=function(m,x){var M=x;/(jpg|gif|png)$/.test(x)&&(M="url("+x+")"),m.canvas.style.background=M,m.canvas.style.backgroundSize="contain",m.currentBackground=x}})()},function(a,h,r){var t={};a.exports=t;var o=r(5),l=r(17),s=r(0);(function(){t._maxFrameDelta=1e3/15,t._frameDeltaFallback=1e3/60,t._timeBufferMargin=1.5,t._elapsedNextEstimate=1,t._smoothingLowerBound=.1,t._smoothingUpperBound=.9,t.create=function(f){var p={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},c=s.extend(p,f);return c.fps=0,c},t.run=function(f,p){return f.timeBuffer=t._frameDeltaFallback,function c(i){f.frameRequestId=t._onNextFrame(f,c),i&&f.enabled&&t.tick(f,p,i)}(),f},t.tick=function(f,p,c){var i=s.now(),v=f.delta,g=0,d=c-f.timeLastTick;if((!d||!f.timeLastTick||d>Math.max(t._maxFrameDelta,f.maxFrameTime))&&(d=f.frameDelta||t._frameDeltaFallback),f.frameDeltaSmoothing){f.frameDeltaHistory.push(d),f.frameDeltaHistory=f.frameDeltaHistory.slice(-f.frameDeltaHistorySize);var y=f.frameDeltaHistory.slice(0).sort(),P=f.frameDeltaHistory.slice(y.length*t._smoothingLowerBound,y.length*t._smoothingUpperBound),A=u(P);d=A||d}f.frameDeltaSnapping&&(d=1e3/Math.round(1e3/d)),f.frameDelta=d,f.timeLastTick=c,f.timeBuffer+=f.frameDelta,f.timeBuffer=s.clamp(f.timeBuffer,0,f.frameDelta+v*t._timeBufferMargin),f.lastUpdatesDeferred=0;var E=f.maxUpdates||Math.ceil(f.maxFrameTime/v),m={timestamp:p.timing.timestamp};o.trigger(f,"beforeTick",m),o.trigger(f,"tick",m);for(var x=s.now();v>0&&f.timeBuffer>=v*t._timeBufferMargin;){o.trigger(f,"beforeUpdate",m),l.update(p,v),o.trigger(f,"afterUpdate",m),f.timeBuffer-=v,g+=1;var M=s.now()-i,w=s.now()-x,T=M+t._elapsedNextEstimate*w/g;if(g>=E||T>f.maxFrameTime){f.lastUpdatesDeferred=Math.round(Math.max(0,f.timeBuffer/v-t._timeBufferMargin));break}}p.timing.lastUpdatesPerFrame=g,o.trigger(f,"afterTick",m),f.frameDeltaHistory.length>=100&&(f.lastUpdatesDeferred&&Math.round(f.frameDelta/v)>E?s.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):f.lastUpdatesDeferred&&s.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof f.isFixed<"u"&&s.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(f.deltaMin||f.deltaMax)&&s.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),f.fps!==0&&s.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},t.stop=function(f){t._cancelNextFrame(f)},t._onNextFrame=function(f,p){if(typeof window<"u"&&window.requestAnimationFrame)f.frameRequestId=window.requestAnimationFrame(p);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return f.frameRequestId},t._cancelNextFrame=function(f){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(f.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var u=function(f){for(var p=0,c=f.length,i=0;i<c;i+=1)p+=f[i];return p/c||0}})()},function(a,h,r){var t={};a.exports=t;var o=r(8),l=r(0),s=l.deprecated;(function(){t.collides=function(u,f){return o.collides(u,f)},s(t,"collides","SAT.collides ➤ replaced by Collision.collides")})()},function(a,h,r){var t={};a.exports=t,r(1);var o=r(0);(function(){t.pathToVertices=function(l,s){typeof window<"u"&&!("SVGPathSeg"in window)&&o.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var u,f,p,c,i,v,g,d,y,P,A=[],E,m,x=0,M=0,w=0;s=s||15;var T=function(C,I,k){var R=k%2===1&&k>1;if(!y||C!=y.x||I!=y.y){y&&R?(E=y.x,m=y.y):(E=0,m=0);var B={x:E+C,y:m+I};(R||!y)&&(y=B),A.push(B),M=E+C,w=m+I}},S=function(C){var I=C.pathSegTypeAsLetter.toUpperCase();if(I!=="Z"){switch(I){case"M":case"L":case"T":case"C":case"S":case"Q":M=C.x,w=C.y;break;case"H":M=C.x;break;case"V":w=C.y;break}T(M,w,C.pathSegType)}};for(t._svgPathToAbsolute(l),p=l.getTotalLength(),v=[],u=0;u<l.pathSegList.numberOfItems;u+=1)v.push(l.pathSegList.getItem(u));for(g=v.concat();x<p;){if(P=l.getPathSegAtLength(x),i=v[P],i!=d){for(;g.length&&g[0]!=i;)S(g.shift());d=i}switch(i.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":c=l.getPointAtLength(x),T(c.x,c.y,0);break}x+=s}for(u=0,f=g.length;u<f;++u)S(g[u]);return A},t._svgPathToAbsolute=function(l){for(var s,u,f,p,c,i,v=l.pathSegList,g=0,d=0,y=v.numberOfItems,P=0;P<y;++P){var A=v.getItem(P),E=A.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(E))"x"in A&&(g=A.x),"y"in A&&(d=A.y);else switch("x1"in A&&(f=g+A.x1),"x2"in A&&(c=g+A.x2),"y1"in A&&(p=d+A.y1),"y2"in A&&(i=d+A.y2),"x"in A&&(g+=A.x),"y"in A&&(d+=A.y),E){case"m":v.replaceItem(l.createSVGPathSegMovetoAbs(g,d),P);break;case"l":v.replaceItem(l.createSVGPathSegLinetoAbs(g,d),P);break;case"h":v.replaceItem(l.createSVGPathSegLinetoHorizontalAbs(g),P);break;case"v":v.replaceItem(l.createSVGPathSegLinetoVerticalAbs(d),P);break;case"c":v.replaceItem(l.createSVGPathSegCurvetoCubicAbs(g,d,f,p,c,i),P);break;case"s":v.replaceItem(l.createSVGPathSegCurvetoCubicSmoothAbs(g,d,c,i),P);break;case"q":v.replaceItem(l.createSVGPathSegCurvetoQuadraticAbs(g,d,f,p),P);break;case"t":v.replaceItem(l.createSVGPathSegCurvetoQuadraticSmoothAbs(g,d),P);break;case"a":v.replaceItem(l.createSVGPathSegArcAbs(g,d,A.r1,A.r2,A.angle,A.largeArcFlag,A.sweepFlag),P);break;case"z":case"Z":g=s,d=u;break}(E=="M"||E=="m")&&(s=g,u=d)}}})()},function(a,h,r){var t={};a.exports=t;var o=r(6);r(0),function(){t.create=o.create,t.add=o.add,t.remove=o.remove,t.clear=o.clear,t.addComposite=o.addComposite,t.addBody=o.addBody,t.addConstraint=o.addConstraint}()}])})})(ei);var Hr=ei.exports;const b=qn(Hr),ke=150,_t=100,Sn=_t/4;function qe(e,n){return e==null||n==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function Ur(e,n){return e==null||n==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function ti(e){let n,a,h;e.length!==2?(n=qe,a=(l,s)=>qe(e(l),s),h=(l,s)=>e(l)-s):(n=e===qe||e===Ur?e:zr,a=e,h=e);function r(l,s,u=0,f=l.length){if(u<f){if(n(s,s)!==0)return f;do{const p=u+f>>>1;a(l[p],s)<0?u=p+1:f=p}while(u<f)}return u}function t(l,s,u=0,f=l.length){if(u<f){if(n(s,s)!==0)return f;do{const p=u+f>>>1;a(l[p],s)<=0?u=p+1:f=p}while(u<f)}return u}function o(l,s,u=0,f=l.length){const p=r(l,s,u,f-1);return p>u&&h(l[p-1],s)>-h(l[p],s)?p-1:p}return{left:r,center:o,right:t}}function zr(){return 0}function Wr(e){return e===null?NaN:+e}const Gr=ti(qe),Xr=Gr.right;ti(Wr).center;const Yr=Math.sqrt(50),Kr=Math.sqrt(10),Qr=Math.sqrt(2);function at(e,n,a){const h=(n-e)/Math.max(0,a),r=Math.floor(Math.log10(h)),t=h/Math.pow(10,r),o=t>=Yr?10:t>=Kr?5:t>=Qr?2:1;let l,s,u;return r<0?(u=Math.pow(10,-r)/o,l=Math.round(e*u),s=Math.round(n*u),l/u<e&&++l,s/u>n&&--s,u=-u):(u=Math.pow(10,r)*o,l=Math.round(e/u),s=Math.round(n/u),l*u<e&&++l,s*u>n&&--s),s<l&&.5<=a&&a<2?at(e,n,a*2):[l,s,u]}function Zr(e,n,a){if(n=+n,e=+e,a=+a,!(a>0))return[];if(e===n)return[e];const h=n<e,[r,t,o]=h?at(n,e,a):at(e,n,a);if(!(t>=r))return[];const l=t-r+1,s=new Array(l);if(h)if(o<0)for(let u=0;u<l;++u)s[u]=(t-u)/-o;else for(let u=0;u<l;++u)s[u]=(t-u)*o;else if(o<0)for(let u=0;u<l;++u)s[u]=(r+u)/-o;else for(let u=0;u<l;++u)s[u]=(r+u)*o;return s}function Nt(e,n,a){return n=+n,e=+e,a=+a,at(e,n,a)[2]}function Jr(e,n,a){n=+n,e=+e,a=+a;const h=n<e,r=h?Nt(n,e,a):Nt(e,n,a);return(h?-1:1)*(r<0?1/-r:r)}var qr={value:()=>{}};function ni(){for(var e=0,n=arguments.length,a={},h;e<n;++e){if(!(h=arguments[e]+"")||h in a||/[\s.]/.test(h))throw new Error("illegal type: "+h);a[h]=[]}return new je(a)}function je(e){this._=e}function jr(e,n){return e.trim().split(/^|\s+/).map(function(a){var h="",r=a.indexOf(".");if(r>=0&&(h=a.slice(r+1),a=a.slice(0,r)),a&&!n.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:h}})}je.prototype=ni.prototype={constructor:je,on:function(e,n){var a=this._,h=jr(e+"",a),r,t=-1,o=h.length;if(arguments.length<2){for(;++t<o;)if((r=(e=h[t]).type)&&(r=ea(a[r],e.name)))return r;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++t<o;)if(r=(e=h[t]).type)a[r]=Mn(a[r],e.name,n);else if(n==null)for(r in a)a[r]=Mn(a[r],e.name,null);return this},copy:function(){var e={},n=this._;for(var a in n)e[a]=n[a].slice();return new je(e)},call:function(e,n){if((r=arguments.length-2)>0)for(var a=new Array(r),h=0,r,t;h<r;++h)a[h]=arguments[h+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(t=this._[e],h=0,r=t.length;h<r;++h)t[h].value.apply(n,a)},apply:function(e,n,a){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var h=this._[e],r=0,t=h.length;r<t;++r)h[r].value.apply(n,a)}};function ea(e,n){for(var a=0,h=e.length,r;a<h;++a)if((r=e[a]).name===n)return r.value}function Mn(e,n,a){for(var h=0,r=e.length;h<r;++h)if(e[h].name===n){e[h]=qr,e=e.slice(0,h).concat(e.slice(h+1));break}return a!=null&&e.push({name:n,value:a}),e}var Dt="http://www.w3.org/1999/xhtml";const Cn={svg:"http://www.w3.org/2000/svg",xhtml:Dt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function pt(e){var n=e+="",a=n.indexOf(":");return a>=0&&(n=e.slice(0,a))!=="xmlns"&&(e=e.slice(a+1)),Cn.hasOwnProperty(n)?{space:Cn[n],local:e}:e}function ta(e){return function(){var n=this.ownerDocument,a=this.namespaceURI;return a===Dt&&n.documentElement.namespaceURI===Dt?n.createElement(e):n.createElementNS(a,e)}}function na(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ii(e){var n=pt(e);return(n.local?na:ta)(n)}function ia(){}function Wt(e){return e==null?ia:function(){return this.querySelector(e)}}function ra(e){typeof e!="function"&&(e=Wt(e));for(var n=this._groups,a=n.length,h=new Array(a),r=0;r<a;++r)for(var t=n[r],o=t.length,l=h[r]=new Array(o),s,u,f=0;f<o;++f)(s=t[f])&&(u=e.call(s,s.__data__,f,t))&&("__data__"in s&&(u.__data__=s.__data__),l[f]=u);return new j(h,this._parents)}function aa(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function oa(){return[]}function ri(e){return e==null?oa:function(){return this.querySelectorAll(e)}}function sa(e){return function(){return aa(e.apply(this,arguments))}}function la(e){typeof e=="function"?e=sa(e):e=ri(e);for(var n=this._groups,a=n.length,h=[],r=[],t=0;t<a;++t)for(var o=n[t],l=o.length,s,u=0;u<l;++u)(s=o[u])&&(h.push(e.call(s,s.__data__,u,o)),r.push(s));return new j(h,r)}function ai(e){return function(){return this.matches(e)}}function oi(e){return function(n){return n.matches(e)}}var fa=Array.prototype.find;function ua(e){return function(){return fa.call(this.children,e)}}function ca(){return this.firstElementChild}function ha(e){return this.select(e==null?ca:ua(typeof e=="function"?e:oi(e)))}var va=Array.prototype.filter;function ga(){return Array.from(this.children)}function pa(e){return function(){return va.call(this.children,e)}}function da(e){return this.selectAll(e==null?ga:pa(typeof e=="function"?e:oi(e)))}function ma(e){typeof e!="function"&&(e=ai(e));for(var n=this._groups,a=n.length,h=new Array(a),r=0;r<a;++r)for(var t=n[r],o=t.length,l=h[r]=[],s,u=0;u<o;++u)(s=t[u])&&e.call(s,s.__data__,u,t)&&l.push(s);return new j(h,this._parents)}function si(e){return new Array(e.length)}function xa(){return new j(this._enter||this._groups.map(si),this._parents)}function ot(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}ot.prototype={constructor:ot,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ya(e){return function(){return e}}function wa(e,n,a,h,r,t){for(var o=0,l,s=n.length,u=t.length;o<u;++o)(l=n[o])?(l.__data__=t[o],h[o]=l):a[o]=new ot(e,t[o]);for(;o<s;++o)(l=n[o])&&(r[o]=l)}function Sa(e,n,a,h,r,t,o){var l,s,u=new Map,f=n.length,p=t.length,c=new Array(f),i;for(l=0;l<f;++l)(s=n[l])&&(c[l]=i=o.call(s,s.__data__,l,n)+"",u.has(i)?r[l]=s:u.set(i,s));for(l=0;l<p;++l)i=o.call(e,t[l],l,t)+"",(s=u.get(i))?(h[l]=s,s.__data__=t[l],u.delete(i)):a[l]=new ot(e,t[l]);for(l=0;l<f;++l)(s=n[l])&&u.get(c[l])===s&&(r[l]=s)}function Ma(e){return e.__data__}function Ca(e,n){if(!arguments.length)return Array.from(this,Ma);var a=n?Sa:wa,h=this._parents,r=this._groups;typeof e!="function"&&(e=ya(e));for(var t=r.length,o=new Array(t),l=new Array(t),s=new Array(t),u=0;u<t;++u){var f=h[u],p=r[u],c=p.length,i=Pa(e.call(f,f&&f.__data__,u,h)),v=i.length,g=l[u]=new Array(v),d=o[u]=new Array(v),y=s[u]=new Array(c);a(f,p,g,d,y,i,n);for(var P=0,A=0,E,m;P<v;++P)if(E=g[P]){for(P>=A&&(A=P+1);!(m=d[A])&&++A<v;);E._next=m||null}}return o=new j(o,h),o._enter=l,o._exit=s,o}function Pa(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Aa(){return new j(this._exit||this._groups.map(si),this._parents)}function Ta(e,n,a){var h=this.enter(),r=this,t=this.exit();return typeof e=="function"?(h=e(h),h&&(h=h.selection())):h=h.append(e+""),n!=null&&(r=n(r),r&&(r=r.selection())),a==null?t.remove():a(t),h&&r?h.merge(r).order():r}function Ia(e){for(var n=e.selection?e.selection():e,a=this._groups,h=n._groups,r=a.length,t=h.length,o=Math.min(r,t),l=new Array(r),s=0;s<o;++s)for(var u=a[s],f=h[s],p=u.length,c=l[s]=new Array(p),i,v=0;v<p;++v)(i=u[v]||f[v])&&(c[v]=i);for(;s<r;++s)l[s]=a[s];return new j(l,this._parents)}function Ea(){for(var e=this._groups,n=-1,a=e.length;++n<a;)for(var h=e[n],r=h.length-1,t=h[r],o;--r>=0;)(o=h[r])&&(t&&o.compareDocumentPosition(t)^4&&t.parentNode.insertBefore(o,t),t=o);return this}function ka(e){e||(e=Ra);function n(p,c){return p&&c?e(p.__data__,c.__data__):!p-!c}for(var a=this._groups,h=a.length,r=new Array(h),t=0;t<h;++t){for(var o=a[t],l=o.length,s=r[t]=new Array(l),u,f=0;f<l;++f)(u=o[f])&&(s[f]=u);s.sort(n)}return new j(r,this._parents).order()}function Ra(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function Ba(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function _a(){return Array.from(this)}function Na(){for(var e=this._groups,n=0,a=e.length;n<a;++n)for(var h=e[n],r=0,t=h.length;r<t;++r){var o=h[r];if(o)return o}return null}function Da(){let e=0;for(const n of this)++e;return e}function Fa(){return!this.node()}function La(e){for(var n=this._groups,a=0,h=n.length;a<h;++a)for(var r=n[a],t=0,o=r.length,l;t<o;++t)(l=r[t])&&e.call(l,l.__data__,t,r);return this}function ba(e){return function(){this.removeAttribute(e)}}function Oa(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Va(e,n){return function(){this.setAttribute(e,n)}}function $a(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function Ha(e,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttribute(e):this.setAttribute(e,a)}}function Ua(e,n){return function(){var a=n.apply(this,arguments);a==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,a)}}function za(e,n){var a=pt(e);if(arguments.length<2){var h=this.node();return a.local?h.getAttributeNS(a.space,a.local):h.getAttribute(a)}return this.each((n==null?a.local?Oa:ba:typeof n=="function"?a.local?Ua:Ha:a.local?$a:Va)(a,n))}function li(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Wa(e){return function(){this.style.removeProperty(e)}}function Ga(e,n,a){return function(){this.style.setProperty(e,n,a)}}function Xa(e,n,a){return function(){var h=n.apply(this,arguments);h==null?this.style.removeProperty(e):this.style.setProperty(e,h,a)}}function Ya(e,n,a){return arguments.length>1?this.each((n==null?Wa:typeof n=="function"?Xa:Ga)(e,n,a??"")):Me(this.node(),e)}function Me(e,n){return e.style.getPropertyValue(n)||li(e).getComputedStyle(e,null).getPropertyValue(n)}function Ka(e){return function(){delete this[e]}}function Qa(e,n){return function(){this[e]=n}}function Za(e,n){return function(){var a=n.apply(this,arguments);a==null?delete this[e]:this[e]=a}}function Ja(e,n){return arguments.length>1?this.each((n==null?Ka:typeof n=="function"?Za:Qa)(e,n)):this.node()[e]}function fi(e){return e.trim().split(/^|\s+/)}function Gt(e){return e.classList||new ui(e)}function ui(e){this._node=e,this._names=fi(e.getAttribute("class")||"")}ui.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ci(e,n){for(var a=Gt(e),h=-1,r=n.length;++h<r;)a.add(n[h])}function hi(e,n){for(var a=Gt(e),h=-1,r=n.length;++h<r;)a.remove(n[h])}function qa(e){return function(){ci(this,e)}}function ja(e){return function(){hi(this,e)}}function eo(e,n){return function(){(n.apply(this,arguments)?ci:hi)(this,e)}}function to(e,n){var a=fi(e+"");if(arguments.length<2){for(var h=Gt(this.node()),r=-1,t=a.length;++r<t;)if(!h.contains(a[r]))return!1;return!0}return this.each((typeof n=="function"?eo:n?qa:ja)(a,n))}function no(){this.textContent=""}function io(e){return function(){this.textContent=e}}function ro(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function ao(e){return arguments.length?this.each(e==null?no:(typeof e=="function"?ro:io)(e)):this.node().textContent}function oo(){this.innerHTML=""}function so(e){return function(){this.innerHTML=e}}function lo(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function fo(e){return arguments.length?this.each(e==null?oo:(typeof e=="function"?lo:so)(e)):this.node().innerHTML}function uo(){this.nextSibling&&this.parentNode.appendChild(this)}function co(){return this.each(uo)}function ho(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function vo(){return this.each(ho)}function go(e){var n=typeof e=="function"?e:ii(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function po(){return null}function mo(e,n){var a=typeof e=="function"?e:ii(e),h=n==null?po:typeof n=="function"?n:Wt(n);return this.select(function(){return this.insertBefore(a.apply(this,arguments),h.apply(this,arguments)||null)})}function xo(){var e=this.parentNode;e&&e.removeChild(this)}function yo(){return this.each(xo)}function wo(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function So(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function Mo(e){return this.select(e?So:wo)}function Co(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Po(e){return function(n){e.call(this,n,this.__data__)}}function Ao(e){return e.trim().split(/^|\s+/).map(function(n){var a="",h=n.indexOf(".");return h>=0&&(a=n.slice(h+1),n=n.slice(0,h)),{type:n,name:a}})}function To(e){return function(){var n=this.__on;if(n){for(var a=0,h=-1,r=n.length,t;a<r;++a)t=n[a],(!e.type||t.type===e.type)&&t.name===e.name?this.removeEventListener(t.type,t.listener,t.options):n[++h]=t;++h?n.length=h:delete this.__on}}}function Io(e,n,a){return function(){var h=this.__on,r,t=Po(n);if(h){for(var o=0,l=h.length;o<l;++o)if((r=h[o]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=t,r.options=a),r.value=n;return}}this.addEventListener(e.type,t,a),r={type:e.type,name:e.name,value:n,listener:t,options:a},h?h.push(r):this.__on=[r]}}function Eo(e,n,a){var h=Ao(e+""),r,t=h.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var s=0,u=l.length,f;s<u;++s)for(r=0,f=l[s];r<t;++r)if((o=h[r]).type===f.type&&o.name===f.name)return f.value}return}for(l=n?Io:To,r=0;r<t;++r)this.each(l(h[r],n,a));return this}function vi(e,n,a){var h=li(e),r=h.CustomEvent;typeof r=="function"?r=new r(n,a):(r=h.document.createEvent("Event"),a?(r.initEvent(n,a.bubbles,a.cancelable),r.detail=a.detail):r.initEvent(n,!1,!1)),e.dispatchEvent(r)}function ko(e,n){return function(){return vi(this,e,n)}}function Ro(e,n){return function(){return vi(this,e,n.apply(this,arguments))}}function Bo(e,n){return this.each((typeof n=="function"?Ro:ko)(e,n))}function*_o(){for(var e=this._groups,n=0,a=e.length;n<a;++n)for(var h=e[n],r=0,t=h.length,o;r<t;++r)(o=h[r])&&(yield o)}var No=[null];function j(e,n){this._groups=e,this._parents=n}function Ue(){return new j([[document.documentElement]],No)}function Do(){return this}j.prototype=Ue.prototype={constructor:j,select:ra,selectAll:la,selectChild:ha,selectChildren:da,filter:ma,data:Ca,enter:xa,exit:Aa,join:Ta,merge:Ia,selection:Do,order:Ea,sort:ka,call:Ba,nodes:_a,node:Na,size:Da,empty:Fa,each:La,attr:za,style:Ya,property:Ja,classed:to,text:ao,html:fo,raise:co,lower:vo,append:go,insert:mo,remove:yo,clone:Mo,datum:Co,on:Eo,dispatch:Bo,[Symbol.iterator]:_o};function Xt(e,n,a){e.prototype=n.prototype=a,a.constructor=e}function gi(e,n){var a=Object.create(e.prototype);for(var h in n)a[h]=n[h];return a}function ze(){}var Fe=.7,st=1/Fe,xe="\\s*([+-]?\\d+)\\s*",Le="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ie="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Fo=/^#([0-9a-f]{3,8})$/,Lo=new RegExp(`^rgb\\(${xe},${xe},${xe}\\)$`),bo=new RegExp(`^rgb\\(${ie},${ie},${ie}\\)$`),Oo=new RegExp(`^rgba\\(${xe},${xe},${xe},${Le}\\)$`),Vo=new RegExp(`^rgba\\(${ie},${ie},${ie},${Le}\\)$`),$o=new RegExp(`^hsl\\(${Le},${ie},${ie}\\)$`),Ho=new RegExp(`^hsla\\(${Le},${ie},${ie},${Le}\\)$`),Pn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Xt(ze,pe,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:An,formatHex:An,formatHex8:Uo,formatHsl:zo,formatRgb:Tn,toString:Tn});function An(){return this.rgb().formatHex()}function Uo(){return this.rgb().formatHex8()}function zo(){return pi(this).formatHsl()}function Tn(){return this.rgb().formatRgb()}function pe(e){var n,a;return e=(e+"").trim().toLowerCase(),(n=Fo.exec(e))?(a=n[1].length,n=parseInt(n[1],16),a===6?In(n):a===3?new X(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):a===8?Ye(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):a===4?Ye(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=Lo.exec(e))?new X(n[1],n[2],n[3],1):(n=bo.exec(e))?new X(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=Oo.exec(e))?Ye(n[1],n[2],n[3],n[4]):(n=Vo.exec(e))?Ye(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=$o.exec(e))?Rn(n[1],n[2]/100,n[3]/100,1):(n=Ho.exec(e))?Rn(n[1],n[2]/100,n[3]/100,n[4]):Pn.hasOwnProperty(e)?In(Pn[e]):e==="transparent"?new X(NaN,NaN,NaN,0):null}function In(e){return new X(e>>16&255,e>>8&255,e&255,1)}function Ye(e,n,a,h){return h<=0&&(e=n=a=NaN),new X(e,n,a,h)}function Wo(e){return e instanceof ze||(e=pe(e)),e?(e=e.rgb(),new X(e.r,e.g,e.b,e.opacity)):new X}function Ft(e,n,a,h){return arguments.length===1?Wo(e):new X(e,n,a,h??1)}function X(e,n,a,h){this.r=+e,this.g=+n,this.b=+a,this.opacity=+h}Xt(X,Ft,gi(ze,{brighter(e){return e=e==null?st:Math.pow(st,e),new X(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Fe:Math.pow(Fe,e),new X(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new X(ge(this.r),ge(this.g),ge(this.b),lt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:En,formatHex:En,formatHex8:Go,formatRgb:kn,toString:kn}));function En(){return`#${ve(this.r)}${ve(this.g)}${ve(this.b)}`}function Go(){return`#${ve(this.r)}${ve(this.g)}${ve(this.b)}${ve((isNaN(this.opacity)?1:this.opacity)*255)}`}function kn(){const e=lt(this.opacity);return`${e===1?"rgb(":"rgba("}${ge(this.r)}, ${ge(this.g)}, ${ge(this.b)}${e===1?")":`, ${e})`}`}function lt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ge(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ve(e){return e=ge(e),(e<16?"0":"")+e.toString(16)}function Rn(e,n,a,h){return h<=0?e=n=a=NaN:a<=0||a>=1?e=n=NaN:n<=0&&(e=NaN),new q(e,n,a,h)}function pi(e){if(e instanceof q)return new q(e.h,e.s,e.l,e.opacity);if(e instanceof ze||(e=pe(e)),!e)return new q;if(e instanceof q)return e;e=e.rgb();var n=e.r/255,a=e.g/255,h=e.b/255,r=Math.min(n,a,h),t=Math.max(n,a,h),o=NaN,l=t-r,s=(t+r)/2;return l?(n===t?o=(a-h)/l+(a<h)*6:a===t?o=(h-n)/l+2:o=(n-a)/l+4,l/=s<.5?t+r:2-t-r,o*=60):l=s>0&&s<1?0:o,new q(o,l,s,e.opacity)}function Xo(e,n,a,h){return arguments.length===1?pi(e):new q(e,n,a,h??1)}function q(e,n,a,h){this.h=+e,this.s=+n,this.l=+a,this.opacity=+h}Xt(q,Xo,gi(ze,{brighter(e){return e=e==null?st:Math.pow(st,e),new q(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Fe:Math.pow(Fe,e),new q(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,h=a+(a<.5?a:1-a)*n,r=2*a-h;return new X(Tt(e>=240?e-240:e+120,r,h),Tt(e,r,h),Tt(e<120?e+240:e-120,r,h),this.opacity)},clamp(){return new q(Bn(this.h),Ke(this.s),Ke(this.l),lt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=lt(this.opacity);return`${e===1?"hsl(":"hsla("}${Bn(this.h)}, ${Ke(this.s)*100}%, ${Ke(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Bn(e){return e=(e||0)%360,e<0?e+360:e}function Ke(e){return Math.max(0,Math.min(1,e||0))}function Tt(e,n,a){return(e<60?n+(a-n)*e/60:e<180?a:e<240?n+(a-n)*(240-e)/60:n)*255}const Yt=e=>()=>e;function Yo(e,n){return function(a){return e+a*n}}function Ko(e,n,a){return e=Math.pow(e,a),n=Math.pow(n,a)-e,a=1/a,function(h){return Math.pow(e+h*n,a)}}function Qo(e){return(e=+e)==1?di:function(n,a){return a-n?Ko(n,a,e):Yt(isNaN(n)?a:n)}}function di(e,n){var a=n-e;return a?Yo(e,a):Yt(isNaN(e)?n:e)}const ft=function e(n){var a=Qo(n);function h(r,t){var o=a((r=Ft(r)).r,(t=Ft(t)).r),l=a(r.g,t.g),s=a(r.b,t.b),u=di(r.opacity,t.opacity);return function(f){return r.r=o(f),r.g=l(f),r.b=s(f),r.opacity=u(f),r+""}}return h.gamma=e,h}(1);function Zo(e,n){n||(n=[]);var a=e?Math.min(n.length,e.length):0,h=n.slice(),r;return function(t){for(r=0;r<a;++r)h[r]=e[r]*(1-t)+n[r]*t;return h}}function Jo(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function qo(e,n){var a=n?n.length:0,h=e?Math.min(a,e.length):0,r=new Array(h),t=new Array(a),o;for(o=0;o<h;++o)r[o]=Kt(e[o],n[o]);for(;o<a;++o)t[o]=n[o];return function(l){for(o=0;o<h;++o)t[o]=r[o](l);return t}}function jo(e,n){var a=new Date;return e=+e,n=+n,function(h){return a.setTime(e*(1-h)+n*h),a}}function Z(e,n){return e=+e,n=+n,function(a){return e*(1-a)+n*a}}function es(e,n){var a={},h={},r;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(r in n)r in e?a[r]=Kt(e[r],n[r]):h[r]=n[r];return function(t){for(r in a)h[r]=a[r](t);return h}}var Lt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,It=new RegExp(Lt.source,"g");function ts(e){return function(){return e}}function ns(e){return function(n){return e(n)+""}}function mi(e,n){var a=Lt.lastIndex=It.lastIndex=0,h,r,t,o=-1,l=[],s=[];for(e=e+"",n=n+"";(h=Lt.exec(e))&&(r=It.exec(n));)(t=r.index)>a&&(t=n.slice(a,t),l[o]?l[o]+=t:l[++o]=t),(h=h[0])===(r=r[0])?l[o]?l[o]+=r:l[++o]=r:(l[++o]=null,s.push({i:o,x:Z(h,r)})),a=It.lastIndex;return a<n.length&&(t=n.slice(a),l[o]?l[o]+=t:l[++o]=t),l.length<2?s[0]?ns(s[0].x):ts(n):(n=s.length,function(u){for(var f=0,p;f<n;++f)l[(p=s[f]).i]=p.x(u);return l.join("")})}function Kt(e,n){var a=typeof n,h;return n==null||a==="boolean"?Yt(n):(a==="number"?Z:a==="string"?(h=pe(n))?(n=h,ft):mi:n instanceof pe?ft:n instanceof Date?jo:Jo(n)?Zo:Array.isArray(n)?qo:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?es:Z)(e,n)}function is(e,n){return e=+e,n=+n,function(a){return Math.round(e*(1-a)+n*a)}}var _n=180/Math.PI,bt={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function xi(e,n,a,h,r,t){var o,l,s;return(o=Math.sqrt(e*e+n*n))&&(e/=o,n/=o),(s=e*a+n*h)&&(a-=e*s,h-=n*s),(l=Math.sqrt(a*a+h*h))&&(a/=l,h/=l,s/=l),e*h<n*a&&(e=-e,n=-n,s=-s,o=-o),{translateX:r,translateY:t,rotate:Math.atan2(n,e)*_n,skewX:Math.atan(s)*_n,scaleX:o,scaleY:l}}var Qe;function rs(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?bt:xi(n.a,n.b,n.c,n.d,n.e,n.f)}function as(e){return e==null||(Qe||(Qe=document.createElementNS("http://www.w3.org/2000/svg","g")),Qe.setAttribute("transform",e),!(e=Qe.transform.baseVal.consolidate()))?bt:(e=e.matrix,xi(e.a,e.b,e.c,e.d,e.e,e.f))}function yi(e,n,a,h){function r(u){return u.length?u.pop()+" ":""}function t(u,f,p,c,i,v){if(u!==p||f!==c){var g=i.push("translate(",null,n,null,a);v.push({i:g-4,x:Z(u,p)},{i:g-2,x:Z(f,c)})}else(p||c)&&i.push("translate("+p+n+c+a)}function o(u,f,p,c){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),c.push({i:p.push(r(p)+"rotate(",null,h)-2,x:Z(u,f)})):f&&p.push(r(p)+"rotate("+f+h)}function l(u,f,p,c){u!==f?c.push({i:p.push(r(p)+"skewX(",null,h)-2,x:Z(u,f)}):f&&p.push(r(p)+"skewX("+f+h)}function s(u,f,p,c,i,v){if(u!==p||f!==c){var g=i.push(r(i)+"scale(",null,",",null,")");v.push({i:g-4,x:Z(u,p)},{i:g-2,x:Z(f,c)})}else(p!==1||c!==1)&&i.push(r(i)+"scale("+p+","+c+")")}return function(u,f){var p=[],c=[];return u=e(u),f=e(f),t(u.translateX,u.translateY,f.translateX,f.translateY,p,c),o(u.rotate,f.rotate,p,c),l(u.skewX,f.skewX,p,c),s(u.scaleX,u.scaleY,f.scaleX,f.scaleY,p,c),u=f=null,function(i){for(var v=-1,g=c.length,d;++v<g;)p[(d=c[v]).i]=d.x(i);return p.join("")}}}var os=yi(rs,"px, ","px)","deg)"),ss=yi(as,", ",")",")"),Ce=0,Be=0,Re=0,wi=1e3,ut,_e,ct=0,de=0,dt=0,be=typeof performance=="object"&&performance.now?performance:Date,Si=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Qt(){return de||(Si(ls),de=be.now()+dt)}function ls(){de=0}function ht(){this._call=this._time=this._next=null}ht.prototype=Mi.prototype={constructor:ht,restart:function(e,n,a){if(typeof e!="function")throw new TypeError("callback is not a function");a=(a==null?Qt():+a)+(n==null?0:+n),!this._next&&_e!==this&&(_e?_e._next=this:ut=this,_e=this),this._call=e,this._time=a,Ot()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ot())}};function Mi(e,n,a){var h=new ht;return h.restart(e,n,a),h}function fs(){Qt(),++Ce;for(var e=ut,n;e;)(n=de-e._time)>=0&&e._call.call(void 0,n),e=e._next;--Ce}function Nn(){de=(ct=be.now())+dt,Ce=Be=0;try{fs()}finally{Ce=0,cs(),de=0}}function us(){var e=be.now(),n=e-ct;n>wi&&(dt-=n,ct=e)}function cs(){for(var e,n=ut,a,h=1/0;n;)n._call?(h>n._time&&(h=n._time),e=n,n=n._next):(a=n._next,n._next=null,n=e?e._next=a:ut=a);_e=e,Ot(h)}function Ot(e){if(!Ce){Be&&(Be=clearTimeout(Be));var n=e-de;n>24?(e<1/0&&(Be=setTimeout(Nn,e-be.now()-dt)),Re&&(Re=clearInterval(Re))):(Re||(ct=be.now(),Re=setInterval(us,wi)),Ce=1,Si(Nn))}}function Dn(e,n,a){var h=new ht;return n=n==null?0:+n,h.restart(r=>{h.stop(),e(r+n)},n,a),h}var hs=ni("start","end","cancel","interrupt"),vs=[],Ci=0,Fn=1,Vt=2,et=3,Ln=4,$t=5,tt=6;function mt(e,n,a,h,r,t){var o=e.__transition;if(!o)e.__transition={};else if(a in o)return;gs(e,a,{name:n,index:h,group:r,on:hs,tween:vs,time:t.time,delay:t.delay,duration:t.duration,ease:t.ease,timer:null,state:Ci})}function Zt(e,n){var a=ee(e,n);if(a.state>Ci)throw new Error("too late; already scheduled");return a}function re(e,n){var a=ee(e,n);if(a.state>et)throw new Error("too late; already running");return a}function ee(e,n){var a=e.__transition;if(!a||!(a=a[n]))throw new Error("transition not found");return a}function gs(e,n,a){var h=e.__transition,r;h[n]=a,a.timer=Mi(t,0,a.time);function t(u){a.state=Fn,a.timer.restart(o,a.delay,a.time),a.delay<=u&&o(u-a.delay)}function o(u){var f,p,c,i;if(a.state!==Fn)return s();for(f in h)if(i=h[f],i.name===a.name){if(i.state===et)return Dn(o);i.state===Ln?(i.state=tt,i.timer.stop(),i.on.call("interrupt",e,e.__data__,i.index,i.group),delete h[f]):+f<n&&(i.state=tt,i.timer.stop(),i.on.call("cancel",e,e.__data__,i.index,i.group),delete h[f])}if(Dn(function(){a.state===et&&(a.state=Ln,a.timer.restart(l,a.delay,a.time),l(u))}),a.state=Vt,a.on.call("start",e,e.__data__,a.index,a.group),a.state===Vt){for(a.state=et,r=new Array(c=a.tween.length),f=0,p=-1;f<c;++f)(i=a.tween[f].value.call(e,e.__data__,a.index,a.group))&&(r[++p]=i);r.length=p+1}}function l(u){for(var f=u<a.duration?a.ease.call(null,u/a.duration):(a.timer.restart(s),a.state=$t,1),p=-1,c=r.length;++p<c;)r[p].call(e,f);a.state===$t&&(a.on.call("end",e,e.__data__,a.index,a.group),s())}function s(){a.state=tt,a.timer.stop(),delete h[n];for(var u in h)return;delete e.__transition}}function ps(e,n){var a=e.__transition,h,r,t=!0,o;if(a){n=n==null?null:n+"";for(o in a){if((h=a[o]).name!==n){t=!1;continue}r=h.state>Vt&&h.state<$t,h.state=tt,h.timer.stop(),h.on.call(r?"interrupt":"cancel",e,e.__data__,h.index,h.group),delete a[o]}t&&delete e.__transition}}function ds(e){return this.each(function(){ps(this,e)})}function ms(e,n){var a,h;return function(){var r=re(this,e),t=r.tween;if(t!==a){h=a=t;for(var o=0,l=h.length;o<l;++o)if(h[o].name===n){h=h.slice(),h.splice(o,1);break}}r.tween=h}}function xs(e,n,a){var h,r;if(typeof a!="function")throw new Error;return function(){var t=re(this,e),o=t.tween;if(o!==h){r=(h=o).slice();for(var l={name:n,value:a},s=0,u=r.length;s<u;++s)if(r[s].name===n){r[s]=l;break}s===u&&r.push(l)}t.tween=r}}function ys(e,n){var a=this._id;if(e+="",arguments.length<2){for(var h=ee(this.node(),a).tween,r=0,t=h.length,o;r<t;++r)if((o=h[r]).name===e)return o.value;return null}return this.each((n==null?ms:xs)(a,e,n))}function Jt(e,n,a){var h=e._id;return e.each(function(){var r=re(this,h);(r.value||(r.value={}))[n]=a.apply(this,arguments)}),function(r){return ee(r,h).value[n]}}function Pi(e,n){var a;return(typeof n=="number"?Z:n instanceof pe?ft:(a=pe(n))?(n=a,ft):mi)(e,n)}function ws(e){return function(){this.removeAttribute(e)}}function Ss(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ms(e,n,a){var h,r=a+"",t;return function(){var o=this.getAttribute(e);return o===r?null:o===h?t:t=n(h=o,a)}}function Cs(e,n,a){var h,r=a+"",t;return function(){var o=this.getAttributeNS(e.space,e.local);return o===r?null:o===h?t:t=n(h=o,a)}}function Ps(e,n,a){var h,r,t;return function(){var o,l=a(this),s;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),s=l+"",o===s?null:o===h&&s===r?t:(r=s,t=n(h=o,l)))}}function As(e,n,a){var h,r,t;return function(){var o,l=a(this),s;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),s=l+"",o===s?null:o===h&&s===r?t:(r=s,t=n(h=o,l)))}}function Ts(e,n){var a=pt(e),h=a==="transform"?ss:Pi;return this.attrTween(e,typeof n=="function"?(a.local?As:Ps)(a,h,Jt(this,"attr."+e,n)):n==null?(a.local?Ss:ws)(a):(a.local?Cs:Ms)(a,h,n))}function Is(e,n){return function(a){this.setAttribute(e,n.call(this,a))}}function Es(e,n){return function(a){this.setAttributeNS(e.space,e.local,n.call(this,a))}}function ks(e,n){var a,h;function r(){var t=n.apply(this,arguments);return t!==h&&(a=(h=t)&&Es(e,t)),a}return r._value=n,r}function Rs(e,n){var a,h;function r(){var t=n.apply(this,arguments);return t!==h&&(a=(h=t)&&Is(e,t)),a}return r._value=n,r}function Bs(e,n){var a="attr."+e;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(n==null)return this.tween(a,null);if(typeof n!="function")throw new Error;var h=pt(e);return this.tween(a,(h.local?ks:Rs)(h,n))}function _s(e,n){return function(){Zt(this,e).delay=+n.apply(this,arguments)}}function Ns(e,n){return n=+n,function(){Zt(this,e).delay=n}}function Ds(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?_s:Ns)(n,e)):ee(this.node(),n).delay}function Fs(e,n){return function(){re(this,e).duration=+n.apply(this,arguments)}}function Ls(e,n){return n=+n,function(){re(this,e).duration=n}}function bs(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?Fs:Ls)(n,e)):ee(this.node(),n).duration}function Os(e,n){if(typeof n!="function")throw new Error;return function(){re(this,e).ease=n}}function Vs(e){var n=this._id;return arguments.length?this.each(Os(n,e)):ee(this.node(),n).ease}function $s(e,n){return function(){var a=n.apply(this,arguments);if(typeof a!="function")throw new Error;re(this,e).ease=a}}function Hs(e){if(typeof e!="function")throw new Error;return this.each($s(this._id,e))}function Us(e){typeof e!="function"&&(e=ai(e));for(var n=this._groups,a=n.length,h=new Array(a),r=0;r<a;++r)for(var t=n[r],o=t.length,l=h[r]=[],s,u=0;u<o;++u)(s=t[u])&&e.call(s,s.__data__,u,t)&&l.push(s);return new se(h,this._parents,this._name,this._id)}function zs(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,a=e._groups,h=n.length,r=a.length,t=Math.min(h,r),o=new Array(h),l=0;l<t;++l)for(var s=n[l],u=a[l],f=s.length,p=o[l]=new Array(f),c,i=0;i<f;++i)(c=s[i]||u[i])&&(p[i]=c);for(;l<h;++l)o[l]=n[l];return new se(o,this._parents,this._name,this._id)}function Ws(e){return(e+"").trim().split(/^|\s+/).every(function(n){var a=n.indexOf(".");return a>=0&&(n=n.slice(0,a)),!n||n==="start"})}function Gs(e,n,a){var h,r,t=Ws(n)?Zt:re;return function(){var o=t(this,e),l=o.on;l!==h&&(r=(h=l).copy()).on(n,a),o.on=r}}function Xs(e,n){var a=this._id;return arguments.length<2?ee(this.node(),a).on.on(e):this.each(Gs(a,e,n))}function Ys(e){return function(){var n=this.parentNode;for(var a in this.__transition)if(+a!==e)return;n&&n.removeChild(this)}}function Ks(){return this.on("end.remove",Ys(this._id))}function Qs(e){var n=this._name,a=this._id;typeof e!="function"&&(e=Wt(e));for(var h=this._groups,r=h.length,t=new Array(r),o=0;o<r;++o)for(var l=h[o],s=l.length,u=t[o]=new Array(s),f,p,c=0;c<s;++c)(f=l[c])&&(p=e.call(f,f.__data__,c,l))&&("__data__"in f&&(p.__data__=f.__data__),u[c]=p,mt(u[c],n,a,c,u,ee(f,a)));return new se(t,this._parents,n,a)}function Zs(e){var n=this._name,a=this._id;typeof e!="function"&&(e=ri(e));for(var h=this._groups,r=h.length,t=[],o=[],l=0;l<r;++l)for(var s=h[l],u=s.length,f,p=0;p<u;++p)if(f=s[p]){for(var c=e.call(f,f.__data__,p,s),i,v=ee(f,a),g=0,d=c.length;g<d;++g)(i=c[g])&&mt(i,n,a,g,c,v);t.push(c),o.push(f)}return new se(t,o,n,a)}var Js=Ue.prototype.constructor;function qs(){return new Js(this._groups,this._parents)}function js(e,n){var a,h,r;return function(){var t=Me(this,e),o=(this.style.removeProperty(e),Me(this,e));return t===o?null:t===a&&o===h?r:r=n(a=t,h=o)}}function Ai(e){return function(){this.style.removeProperty(e)}}function el(e,n,a){var h,r=a+"",t;return function(){var o=Me(this,e);return o===r?null:o===h?t:t=n(h=o,a)}}function tl(e,n,a){var h,r,t;return function(){var o=Me(this,e),l=a(this),s=l+"";return l==null&&(s=l=(this.style.removeProperty(e),Me(this,e))),o===s?null:o===h&&s===r?t:(r=s,t=n(h=o,l))}}function nl(e,n){var a,h,r,t="style."+n,o="end."+t,l;return function(){var s=re(this,e),u=s.on,f=s.value[t]==null?l||(l=Ai(n)):void 0;(u!==a||r!==f)&&(h=(a=u).copy()).on(o,r=f),s.on=h}}function il(e,n,a){var h=(e+="")=="transform"?os:Pi;return n==null?this.styleTween(e,js(e,h)).on("end.style."+e,Ai(e)):typeof n=="function"?this.styleTween(e,tl(e,h,Jt(this,"style."+e,n))).each(nl(this._id,e)):this.styleTween(e,el(e,h,n),a).on("end.style."+e,null)}function rl(e,n,a){return function(h){this.style.setProperty(e,n.call(this,h),a)}}function al(e,n,a){var h,r;function t(){var o=n.apply(this,arguments);return o!==r&&(h=(r=o)&&rl(e,o,a)),h}return t._value=n,t}function ol(e,n,a){var h="style."+(e+="");if(arguments.length<2)return(h=this.tween(h))&&h._value;if(n==null)return this.tween(h,null);if(typeof n!="function")throw new Error;return this.tween(h,al(e,n,a??""))}function sl(e){return function(){this.textContent=e}}function ll(e){return function(){var n=e(this);this.textContent=n??""}}function fl(e){return this.tween("text",typeof e=="function"?ll(Jt(this,"text",e)):sl(e==null?"":e+""))}function ul(e){return function(n){this.textContent=e.call(this,n)}}function cl(e){var n,a;function h(){var r=e.apply(this,arguments);return r!==a&&(n=(a=r)&&ul(r)),n}return h._value=e,h}function hl(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,cl(e))}function vl(){for(var e=this._name,n=this._id,a=Ti(),h=this._groups,r=h.length,t=0;t<r;++t)for(var o=h[t],l=o.length,s,u=0;u<l;++u)if(s=o[u]){var f=ee(s,n);mt(s,e,a,u,o,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new se(h,this._parents,e,a)}function gl(){var e,n,a=this,h=a._id,r=a.size();return new Promise(function(t,o){var l={value:o},s={value:function(){--r===0&&t()}};a.each(function(){var u=re(this,h),f=u.on;f!==e&&(n=(e=f).copy(),n._.cancel.push(l),n._.interrupt.push(l),n._.end.push(s)),u.on=n}),r===0&&t()})}var pl=0;function se(e,n,a,h){this._groups=e,this._parents=n,this._name=a,this._id=h}function Ti(){return++pl}var oe=Ue.prototype;se.prototype={constructor:se,select:Qs,selectAll:Zs,selectChild:oe.selectChild,selectChildren:oe.selectChildren,filter:Us,merge:zs,selection:qs,transition:vl,call:oe.call,nodes:oe.nodes,node:oe.node,size:oe.size,empty:oe.empty,each:oe.each,on:Xs,attr:Ts,attrTween:Bs,style:il,styleTween:ol,text:fl,textTween:hl,remove:Ks,tween:ys,delay:Ds,duration:bs,ease:Vs,easeVarying:Hs,end:gl,[Symbol.iterator]:oe[Symbol.iterator]};function dl(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var ml={time:null,delay:0,duration:250,ease:dl};function xl(e,n){for(var a;!(a=e.__transition)||!(a=a[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return a}function yl(e){var n,a;e instanceof se?(n=e._id,e=e._name):(n=Ti(),(a=ml).time=Qt(),e=e==null?null:e+"");for(var h=this._groups,r=h.length,t=0;t<r;++t)for(var o=h[t],l=o.length,s,u=0;u<l;++u)(s=o[u])&&mt(s,e,n,u,o,a||xl(s,n));return new se(h,this._parents,e,n)}Ue.prototype.interrupt=ds;Ue.prototype.transition=yl;function wl(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function vt(e,n){if((a=(e=n?e.toExponential(n-1):e.toExponential()).indexOf("e"))<0)return null;var a,h=e.slice(0,a);return[h.length>1?h[0]+h.slice(2):h,+e.slice(a+1)]}function Pe(e){return e=vt(Math.abs(e)),e?e[1]:NaN}function Sl(e,n){return function(a,h){for(var r=a.length,t=[],o=0,l=e[0],s=0;r>0&&l>0&&(s+l+1>h&&(l=Math.max(1,h-s)),t.push(a.substring(r-=l,r+l)),!((s+=l+1)>h));)l=e[o=(o+1)%e.length];return t.reverse().join(n)}}function Ml(e){return function(n){return n.replace(/[0-9]/g,function(a){return e[+a]})}}var Cl=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function gt(e){if(!(n=Cl.exec(e)))throw new Error("invalid format: "+e);var n;return new qt({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}gt.prototype=qt.prototype;function qt(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}qt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Pl(e){e:for(var n=e.length,a=1,h=-1,r;a<n;++a)switch(e[a]){case".":h=r=a;break;case"0":h===0&&(h=a),r=a;break;default:if(!+e[a])break e;h>0&&(h=0);break}return h>0?e.slice(0,h)+e.slice(r+1):e}var Ii;function Al(e,n){var a=vt(e,n);if(!a)return e+"";var h=a[0],r=a[1],t=r-(Ii=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=h.length;return t===o?h:t>o?h+new Array(t-o+1).join("0"):t>0?h.slice(0,t)+"."+h.slice(t):"0."+new Array(1-t).join("0")+vt(e,Math.max(0,n+t-1))[0]}function bn(e,n){var a=vt(e,n);if(!a)return e+"";var h=a[0],r=a[1];return r<0?"0."+new Array(-r).join("0")+h:h.length>r+1?h.slice(0,r+1)+"."+h.slice(r+1):h+new Array(r-h.length+2).join("0")}const On={"%":(e,n)=>(e*100).toFixed(n),b:e=>Math.round(e).toString(2),c:e=>e+"",d:wl,e:(e,n)=>e.toExponential(n),f:(e,n)=>e.toFixed(n),g:(e,n)=>e.toPrecision(n),o:e=>Math.round(e).toString(8),p:(e,n)=>bn(e*100,n),r:bn,s:Al,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Vn(e){return e}var $n=Array.prototype.map,Hn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Tl(e){var n=e.grouping===void 0||e.thousands===void 0?Vn:Sl($n.call(e.grouping,Number),e.thousands+""),a=e.currency===void 0?"":e.currency[0]+"",h=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",t=e.numerals===void 0?Vn:Ml($n.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",s=e.nan===void 0?"NaN":e.nan+"";function u(p){p=gt(p);var c=p.fill,i=p.align,v=p.sign,g=p.symbol,d=p.zero,y=p.width,P=p.comma,A=p.precision,E=p.trim,m=p.type;m==="n"?(P=!0,m="g"):On[m]||(A===void 0&&(A=12),E=!0,m="g"),(d||c==="0"&&i==="=")&&(d=!0,c="0",i="=");var x=g==="$"?a:g==="#"&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",M=g==="$"?h:/[%p]/.test(m)?o:"",w=On[m],T=/[defgprs%]/.test(m);A=A===void 0?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function S(C){var I=x,k=M,R,B,_;if(m==="c")k=w(C)+k,C="";else{C=+C;var N=C<0||1/C<0;if(C=isNaN(C)?s:w(Math.abs(C),A),E&&(C=Pl(C)),N&&+C==0&&v!=="+"&&(N=!1),I=(N?v==="("?v:l:v==="-"||v==="("?"":v)+I,k=(m==="s"?Hn[8+Ii/3]:"")+k+(N&&v==="("?")":""),T){for(R=-1,B=C.length;++R<B;)if(_=C.charCodeAt(R),48>_||_>57){k=(_===46?r+C.slice(R+1):C.slice(R))+k,C=C.slice(0,R);break}}}P&&!d&&(C=n(C,1/0));var D=I.length+C.length+k.length,F=D<y?new Array(y-D+1).join(c):"";switch(P&&d&&(C=n(F+C,F.length?y-k.length:1/0),F=""),i){case"<":C=I+C+k+F;break;case"=":C=I+F+C+k;break;case"^":C=F.slice(0,D=F.length>>1)+I+C+k+F.slice(D);break;default:C=F+I+C+k;break}return t(C)}return S.toString=function(){return p+""},S}function f(p,c){var i=u((p=gt(p),p.type="f",p)),v=Math.max(-8,Math.min(8,Math.floor(Pe(c)/3)))*3,g=Math.pow(10,-v),d=Hn[8+v/3];return function(y){return i(g*y)+d}}return{format:u,formatPrefix:f}}var Ze,Ei,ki;Il({thousands:",",grouping:[3],currency:["$",""]});function Il(e){return Ze=Tl(e),Ei=Ze.format,ki=Ze.formatPrefix,Ze}function El(e){return Math.max(0,-Pe(Math.abs(e)))}function kl(e,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Pe(n)/3)))*3-Pe(Math.abs(e)))}function Rl(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,Pe(n)-Pe(e))+1}function Bl(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}function _l(e){return function(){return e}}function Nl(e){return+e}var Un=[0,1];function me(e){return e}function Ht(e,n){return(n-=e=+e)?function(a){return(a-e)/n}:_l(isNaN(n)?NaN:.5)}function Dl(e,n){var a;return e>n&&(a=e,e=n,n=a),function(h){return Math.max(e,Math.min(n,h))}}function Fl(e,n,a){var h=e[0],r=e[1],t=n[0],o=n[1];return r<h?(h=Ht(r,h),t=a(o,t)):(h=Ht(h,r),t=a(t,o)),function(l){return t(h(l))}}function Ll(e,n,a){var h=Math.min(e.length,n.length)-1,r=new Array(h),t=new Array(h),o=-1;for(e[h]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++o<h;)r[o]=Ht(e[o],e[o+1]),t[o]=a(n[o],n[o+1]);return function(l){var s=Xr(e,l,1,h)-1;return t[s](r[s](l))}}function bl(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Ol(){var e=Un,n=Un,a=Kt,h,r,t,o=me,l,s,u;function f(){var c=Math.min(e.length,n.length);return o!==me&&(o=Dl(e[0],e[c-1])),l=c>2?Ll:Fl,s=u=null,p}function p(c){return c==null||isNaN(c=+c)?t:(s||(s=l(e.map(h),n,a)))(h(o(c)))}return p.invert=function(c){return o(r((u||(u=l(n,e.map(h),Z)))(c)))},p.domain=function(c){return arguments.length?(e=Array.from(c,Nl),f()):e.slice()},p.range=function(c){return arguments.length?(n=Array.from(c),f()):n.slice()},p.rangeRound=function(c){return n=Array.from(c),a=is,f()},p.clamp=function(c){return arguments.length?(o=c?!0:me,f()):o!==me},p.interpolate=function(c){return arguments.length?(a=c,f()):a},p.unknown=function(c){return arguments.length?(t=c,p):t},function(c,i){return h=c,r=i,f()}}function Vl(){return Ol()(me,me)}function $l(e,n,a,h){var r=Jr(e,n,a),t;switch(h=gt(h??",f"),h.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(n));return h.precision==null&&!isNaN(t=kl(r,o))&&(h.precision=t),ki(h,o)}case"":case"e":case"g":case"p":case"r":{h.precision==null&&!isNaN(t=Rl(r,Math.max(Math.abs(e),Math.abs(n))))&&(h.precision=t-(h.type==="e"));break}case"f":case"%":{h.precision==null&&!isNaN(t=El(r))&&(h.precision=t-(h.type==="%")*2);break}}return Ei(h)}function Hl(e){var n=e.domain;return e.ticks=function(a){var h=n();return Zr(h[0],h[h.length-1],a??10)},e.tickFormat=function(a,h){var r=n();return $l(r[0],r[r.length-1],a??10,h)},e.nice=function(a){a==null&&(a=10);var h=n(),r=0,t=h.length-1,o=h[r],l=h[t],s,u,f=10;for(l<o&&(u=o,o=l,l=u,u=r,r=t,t=u);f-- >0;){if(u=Nt(o,l,a),u===s)return h[r]=o,h[t]=l,n(h);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;s=u}return e},e}function Ri(){var e=Vl();return e.copy=function(){return bl(e,Ri())},Bl.apply(e,arguments),Hl(e)}function Ne(e,n,a){this.k=e,this.x=n,this.y=a}Ne.prototype={constructor:Ne,scale:function(e){return e===1?this:new Ne(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new Ne(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Ne.prototype;function Bi(e){return new Promise((n,a)=>{const h=new Image;h.onload=()=>n(h),h.onerror=()=>a(`error loading ${e}`),h.src=e})}const z=1e3,zn=.01,_i=5,Wn=.005,Ul=.1;Ri().domain([.1,_i/2]).clamp(!0).range([1,1.5]);class zl{constructor(){this.events={}}on(n,a){this.events[n]||(this.events[n]=[]),this.events[n].push(a)}emit(n,a){this.events[n]&&this.events[n].forEach(h=>h(a))}}function Wl(){const e=new zl;let n,a,h,r,t,o,l,s,u;function f(){const S=Ul,C=z/2,I=Sn*3,k=ke,R=_t;s=b.Bodies.rectangle(C,I,k,R,{frictionAir:S,render:{fillStyle:"#a0a",visible:!1},label:"mower",sleepThreshold:1/0,isSleeping:!1,isStatic:!1}),b.Events.on(s,"sleepStart",y),b.Composite.add(a,s)}function p(){const S=b.Bodies.rectangle(300,300,200,100,{isStatic:!0,isSleeping:!0,render:{fillStyle:"#000",opacity:1},label:"obstacle"}),C=b.Bodies.circle(700,600,150,{isStatic:!0,isSleeping:!0,render:{fillStyle:"#000"},label:"obstacle"});b.Composite.add(a,[S,C])}function c(){u=[];for(let S=0;S<4;S++){const C=S%2===0?z:10,I=S%2===1?z:10,k=S%2===0?z/2:S===1?z:0,R=S%2===1?z/2:S===2?z:0,B=b.Bodies.rectangle(k,R,C,I,{isStatic:!0,isSleeping:!0,label:"fence",render:{fillStyle:"#000",visible:!1}});u.push(B)}b.Composite.add(a,u)}function i(){const S=s.angle;let C=s.position.x,I=s.position.y;C=C+Math.cos(S)*ke/6,I=I+Math.sin(S)*ke/6;const k=Math.round(C),R=Math.round(I),B=[],_=Sn,N=_*_;for(let D=-_;D<_;D++)for(let F=-_;F<_;F++)if(D*D+F*F<=N){const O=k+D,V=R+F;O>=0&&O<z&&V>=0&&V<z&&(t[O][V]=!0,B.push({x:O,y:V}))}e.emit("pixels",B)}function v(){i(),e.emit("update",r.bounds)}function g(){l&&(b.Render.startViewTransform(r),d(),b.Render.endViewTransform(r))}function d(){const S=r.context,{x:C,y:I}=s.position,k=ke,R=_t,_=Math.floor(Date.now()/200%1)*ke;S.translate(C,I),S.rotate(s.angle),S.drawImage(o,_,0,o.width,o.height,-k/2,-R/2,k,R)}function y(S){}function P(S){S.includes("left")?b.Body.rotate(s,-zn):S.includes("right")&&b.Body.rotate(s,zn),S.includes("up")?A("forward"):S.includes("down")&&A("reverse"),E(_i)}function A(S){const C=s.angle,I={x:Math.cos(S==="forward"?C:C+Math.PI)*Wn,y:Math.sin(S==="forward"?C:C+Math.PI)*Wn};b.Body.applyForce(s,s.position,I)}function E(S){const C=s.speed;if(C>S){const I=S/C;b.Body.setVelocity(s,{x:s.velocity.x*I,y:s.velocity.y*I})}}function m(S){}function x(S){}function M(S){r&&(r.canvas.width=S,r.canvas.height=S,b.Render.setSize(r,S,S),b.Render,b.Render.lookAt(r,{min:{x:0,y:0},max:{x:z,y:z}}))}async function w(){o=await Bi("assets/sprites/mower.png"),l=!0,e.emit("ready")}function T(S){t=Array.from({length:z},()=>Array(z).fill(!1)),n=b.Engine.create({enableSleeping:!0}),a=n.world,n.gravity.y=0,h=b.Runner.create(),r=b.Render.create({element:S,engine:n,options:{width:z,height:z,wireframes:!1,pixelRatio:"auto",background:"transparent",hasBounds:!0}}),b.Runner.run(h,n),b.Render.run(r),b.Events.on(r,"afterRender",g),b.Events.on(n,"afterUpdate",v),f(),c(),p(),w()}return{setState:m,autoMute:x,resize:M,init:T,steer:P,on:(S,C)=>e.on(S,C)}}var Gl=He('<div class="c svelte-3t4c3p"><div class="bg svelte-3t4c3p"><canvas class="mowed svelte-3t4c3p" width="1000" height="1000"></canvas> <canvas width="1000" height="1000" class="svelte-3t4c3p"></canvas> <img class="border svelte-3t4c3p" src="assets/sprites/border.png" alt="border"></div> <div class="fg svelte-3t4c3p"></div></div>');function Xl(e,n){Qn(n,!0);let a=Se(void 0),h=Se(!1),r=rt({}),t,o,l,s;const u=Wl();function f(x){x.key==="ArrowUp"?r.up=!0:x.key==="ArrowDown"?r.down=!0:x.key==="ArrowLeft"?r.left=!0:x.key==="ArrowRight"&&(r.right=!0)}function p(x){x.key==="ArrowUp"?r.up=!1:x.key==="ArrowDown"?r.down=!1:x.key==="ArrowLeft"?r.left=!1:x.key==="ArrowRight"&&(r.right=!1)}function c(){J(h)&&u.resize(n.size)}function i(){const x=Object.keys(r).filter(M=>r[M]);x.length&&u.steer(x),requestAnimationFrame(i)}function v(x){o.fillStyle="#0c0",x.forEach(M=>o.fillRect(M.x,M.y,1,1))}function g(x){const M=x.max.x-x.min.x,w=x.max.y-x.min.y,T=1e3/M,S=1e3/w;s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,1e3,1e3),s.scale(T,S),s.translate(-x.min.x,-x.min.y),s.drawImage(t,0,0)}async function d(){s=l.getContext("2d"),o=t.getContext("2d"),u.on("ready",()=>we(h,!0)),u.on("pixels",v),u.on("update",g),u.init(J(a)),requestAnimationFrame(i),await Bi("assets/images/keanu.jpg")}kt(d),kt(c);var y=Gl();Rt("keydown",gn,f),Rt("keyup",gn,p);var P=nt(y),A=nt(P);Je(A,x=>t=x,()=>t);var E=G(A,2);Je(E,x=>l=x,()=>l),lr(2),it(P);var m=G(P,2);Je(m,x=>we(a,x),()=>J(a)),it(y),Et(()=>{xn(m,"width",`${n.size??""}px`),xn(m,"height",`${n.size??""}px`)}),De(e,y),Zn()}function Yl(){var e;return((e=window==null?void 0:window.visualViewport)==null?void 0:e.width)||document.documentElement.clientWidth}function Kl(){var e;return((e=window==null?void 0:window.visualViewport)==null?void 0:e.height)||document.documentElement.clientHeight}var Oe,Ve,ye,$e,Ut;class Ql{constructor(){Te(this,$e);Te(this,Oe,Se(0));Te(this,Ve,Se(0));Te(this,ye);kt(()=>(St(this,$e,Ut).call(this),ln(this,ye,jn(St(this,$e,Ut).bind(this),250)),window.addEventListener("resize",ue(this,ye)),()=>{window.removeEventListener("resize",ue(this,ye))}))}get width(){return J(ue(this,Oe))}set width(n){we(ue(this,Oe),rt(n))}get height(){return J(ue(this,Ve))}set height(n){we(ue(this,Ve),rt(n))}}Oe=new WeakMap,Ve=new WeakMap,ye=new WeakMap,$e=new WeakSet,Ut=function(){this.width=Yl(),this.height=Kl()};var Zl=He('<p class="svelte-kca71z">How fast can you mow this lawn?</p> <div class="c svelte-kca71z"><figure class="svelte-kca71z"><!></figure></div>',1);function Jl(e){const n=new Ql;let a=Se(void 0),h=Se(0),r=fr(()=>Math.min(J(h),n.height));function t(){we(h,rt(J(a).offsetWidth))}var o=Zl(),l=G(zt(o),2),s=nt(l);Je(s,f=>we(a,f),()=>J(a));var u=nt(s);cr(u,()=>J(r),f=>{Xl(f,{get size(){return J(r)}})}),it(s),it(l),Rt("resize",s,t),mr(s,(f,p)=>$r(f,p),()=>({debounce:250,start:!0})),De(e,o)}const ql={title:"Title TK",description:"Description tk."},jl=[{section:"intro",content:[{type:"h4",value:"An h4 element with no attributes"},{type:"text",value:"Some random text here, followed by an img tag."},{type:"img",value:{src:"../assets/demo/test.jpg",alt:"A cat"}},{type:"Test",value:{label:"I’m a custom component!",value:"50"}}]}],Gn={meta:ql,body:jl};function ef(){console.log("--- --- --- --- --- ---"),console.log("svelte-starter: 6.0.0"),console.log("build: 2024-10-29-10:22"),console.log("--- --- --- --- --- ---")}var tf=He("<!> <!>",1);function lf(e,n){Qn(n,!0),ef();const a=["https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Regular.woff2","https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Bold.woff2","https://pudding.cool/assets/fonts/atlas/AtlasGrotesk-Regular-Web.woff2","https://pudding.cool/assets/fonts/atlas/AtlasGrotesk-Bold-Web.woff2"],{title:h,description:r,url:t,keywords:o}=Gn;pn("copy",Gn),pn("data",n.data);var l=tf(),s=zt(l);Sr(s,{title:h,description:r,url:t,preloadFont:a,keywords:o});var u=G(s,2);Jl(u),De(e,l),Zn()}export{lf as component};
